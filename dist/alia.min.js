/*! alia 2014-07-09 */
!function(a,b){"use strict";function c(a,b){for(var c in b)b.hasOwnProperty(c)&&(a=a.replace(":"+c,b[c]));return a}function d(a){this.defaultPrevented=!1,this.result=b,this.type=a}function e(){for(var a,b=x.length;b;){if(b--,a=x[b].charCodeAt(0),57==a)return x[b]="A",x.join("");if(90!=a)return x[b]=String.fromCharCode(a+1),x.join("");x[b]="0"}return x.unshift("0"),x.join("")}function f(){function a(){var a=$(this),b=a.attr("alia-context"),c=e();g.ids[b]=c,a.attr("id",c)}var b="",c="",d=null;if(1===arguments.length?c=arguments[0]:2===arguments.length?"string"==typeof arguments[1]?(b=arguments[0],c=arguments[1]):"object"==typeof arguments[1]&&(c=arguments[0],d=arguments[1]):3===arguments.length&&(b=arguments[0],c=arguments[1],d=arguments[2]),"string"!=typeof b)throw new Error("Append only accepts string keys");if("string"!=typeof c||0===c.length)throw new Error("Append only accepts non-empty string html arguments");if(d&&("object"!=typeof d||Array.isArray(d)))throw new Error("Append only accepts object parameters");if(!this.ids.hasOwnProperty(b))throw new Error("Unrecognized key");for(var f in d)d.hasOwnProperty(f)&&(c=c.replace(new RegExp(":"+f,"g"),d[f]));var g=new p,h=$(c);return h.filter("[alia-context]").each(a),h.find("[alia-context]").each(a),$("#"+this.ids[b]).append(h),g}function g(){for(var a in this.ids)this.ids.hasOwnProperty(a)&&$("#"+this.ids[a]).empty()}function h(a){return $("#"+this.ids[""]).click(this,a),this}function i(a){return $("#"+this.ids[""]).click(this,function(){$("html, body").animate({scrollTop:$('[name="'+a+'"]').offset().top-parseInt($("body").css("padding-top"))},300)}),this}function j(a){return $("#"+this.id()).keypress(function(b){13===b.which&&(b.preventDefault(),a())}),this}function k(a,b){return $("#"+this.ids[""]).hover(a,b),this}function l(a){return $("#"+this.ids[""]).focusout(a),this}function m(a){return $(window).resize(function(){var b=$("#"+this.ids[""]).width();a(b)}.bind(this)),this}function n(a){Object.defineProperty(this,"id",{value:a,writable:!1,enumerable:!0,configurable:!1})}function o(a){this.ids="string"==typeof a?{"":a}:a}function p(){this.ids={}}function q(a){var b=t.$localStorage,c=b.get("leftCollapsed"),d=b.get("rightCollapsed");null===c&&(c=!1,b.set("leftCollapsed",!1)),null===d&&(c=!1,b.set("rightCollapsed",!1)),this.body=a.append('<div alia-context class="multiview-body sticky-navigation sticky-menu"></div>'),this.nav=this.body.append('<div alia-context class="multiview-navigation"></div>').onHover(function(){this.body.class("add","peek-navigation")}.bind(this),function(){this.body.class("remove","peek-navigation")}.bind(this)),this.menu=this.body.append('<div alia-context class="multiview-menu"></div>').onHover(function(){this.body.class("add","peek-menu")}.bind(this),function(){this.body.class("remove","peek-menu")}.bind(this)),this.body.append('<div alia-context class="multiview-navigation-draggable"></div>').onClick(function(){this.body.class("toggle","sticky-navigation"),this.body.class("toggle","collapse-navigation"),c=!c,b.set("leftCollapsed",c)}.bind(this)).onHover(function(){this.body.class("add","peek-navigation")}.bind(this),function(){this.body.class("remove","peek-navigation")}.bind(this)),this.viewport=this.body.append('<div alia-context class="multiview-viewport"></div>'),this.body.append('<div alia-context class="multiview-menu-draggable"></div>').onClick(function(){this.body.class("toggle","sticky-menu"),this.body.class("toggle","collapse-menu"),d=!d,b.set("rightCollapsed",d)}.bind(this)).onHover(function(){this.body.class("add","peek-menu")}.bind(this),function(){this.body.class("remove","peek-menu")}.bind(this)),c&&this.body.class("add","collapse-navigation"),d&&this.body.class("add","collapse-menu");var e=this;this.nav.push=function(){return e.push.apply(e,arguments),this},this.viewport.push=function(){return e.push.apply(e,arguments),this},this.views={},this.default=null,this.active=null}function r(a){this.context=a.context,this.control=a.control,this.viewport=a.viewport,this.definitions={},this.singletons={},this.root=null,this.active=null}function s(a,c){this.workspace=a,this.id=c.id,this.name=c.name,this.signature=c.signature,this.args=c.args||b,this.control=c.control,this.view=c.view,this.panel=c.panel,this.body=c.body,this.element=$("#"+this.id),this.detached=!1,this.parent=c.parent||null,this.child=null,this.subtasks=[]}var t={},u={},v={};a.applyDefaults=function(a,b,c){for(var d in b)(!a.hasOwnProperty(d)||c&&c.hasOwnProperty(d)&&!c[d].hasOwnProperty(a[d]))&&(a[d]=b[d])},a.defaults=a.applyDefaults,a.replace=c,a.version="0.1.0",a.error=function(a){for(var b=1;b<arguments.length;++b)a=a.replace(/\?/,"'"+arguments[b]+"'");return new Error(a)},d.prototype.isDefaultPrevented=function(){return this.defaultPrevented},d.prototype.preventDefault=function(){this.defaultPrevented=!0};var w={};a.on=function(a,b){var c=w[a];c||(c=w[a]=[]),c.push(b)},a.broadcast=function(a,b){var c,e=new d(a),f=w[a];if(f){var g=[e];if(2===arguments.length)g=g.concat(b);else if(arguments.length>2)for(c=1;c<arguments.length;++c)g.push(arguments[c]);for(c=0;c<f.length&&(e.result=f[c].apply(null,g),!e.isDefaultPrevented());++c);}return e},a.href=function(a){var b=t.$location;return"#"===a.charAt(0)?b.path().substr(1)+a:a};var x=["0","0","0"],y=$("body").find("[alia-viewport]").first();y.attr("id",e());var z=new o(y.attr("id"));a.viewport=z;var A=z,B="view";a.currentContext=function(){return A},a.currentContextType=function(){return B},a.stageMultiviewContext=function(){return z.empty(),B="multiview",A=q.create(z)},a.stageViewContext=function(){return z.empty(),B="view",A=z},a.stageWorkspaceContext=function(){return z.empty(),B="workspace",A=r.create(z)};var C=$("body").find("[alia-alerts]").first();C.attr("id",e()),a.alerts=new o(C.attr("id"));var D=$("body").find("[alia-header]").first();D.attr("id",e()),a.header=new o(D.attr("id")),n.prototype.hide=function(){$("#"+this.id).hide()},n.prototype.onClick=function(a){return $("#"+this.id).click(this,a),this},n.prototype.show=function(){$("#"+this.id).show()},o.prototype.append=f,o.prototype.empty=g,p.prototype.animateOnClick=function(a,b,c){var d=this;$("#"+a.id()).click(function(){$("#"+d.id()).animate(b,c)})},p.prototype.bindCheckboxField=function(a,b){1===arguments.length&&(b=a,a="");var c=$("#"+this.id(a)),d=this.defineProperty("checked",b);if(!b.isSettable())throw new Error("Attempted to bind non-settable observer to checkbox field");var e;d.onResolve(function(a){e!==a&&(e=a,c.prop("checked",a))}),c.on("change",function(){var a=c.prop("checked")||!1;e!==a&&(e=a,d.set(e))})},p.prototype.bindCollapse=function(a,b){var c=this.defineProperty("collapsed",b),d=$("#"+this.id(a));c.onResolve(function(a){a?d.slideUp(200):d.slideDown(200)})},p.prototype.bindDisabled=function(a,b){1===arguments.length&&(b=a,a="");var c=$("#"+this.id(a));return this.defineProperty("disabled",b).onResolve(function(a){a===!0?c.attr("disabled","disabled"):c.removeAttr("disabled")}),this},p.prototype.bindHtml=function(a,b,c){2===arguments.length&&(c=b,b=a,a="");var d=$("#"+this.id(a));return this.defineProperty(b,c).onResolve(function(a){d.html(a)}),this},p.prototype.bindDate=function(a,b){switch(arguments.length){case 1:b=a,a=""}var c,d=$("#"+this.id(a)),e=function(){return new Date(d.val())},f=this.defineProperty("date",b);d.change(function(){var a=e();c!==a&&(c=a,f.set(c))}),f.onResolve(function(a){c!==a&&(c=a,d.datepicker("setDate",c))})},p.prototype.bindText=function(a,b,c,d){switch(arguments.length){case 1:d="text",c=a,b="text",a="";break;case 2:d=b,c=a,b="text",a="";break;case 3:d=c,c=b,b=a,a=""}var e,f=$("#"+this.id(a)),g=this.defaultParser(d),h=function(){var a;try{a=g(f.val())}catch(b){a=null}return a},i=this.defineProperty(b,c);f.on("input",function(){var a=h();e!==a&&(e=a,i.set(e))}),i.onResolve(function(a){e!==a&&(e=a,f.val(e))}),i.onUnresolve(function(){f.val("")})},p.prototype.bindSelectValue=function(a,b){1===arguments.length&&(b=a,a="");var c,d=$("#"+this.id(a)),e=this.defineProperty("selected",b);d.on("change",function(){var a=d.val();c!==a&&(c=a,e.set(c))}),e.onResolve(function(a){c!==a&&(c=a,d.val(c))})},p.prototype.bindVisible=function(a,b){1===arguments.length&&(b=a,a="");var c=$("#"+this.id(a));return this.defineProperty("visible",b).onResolve(function(a){a===!0?c.show():c.hide()}),this},p.prototype.defaultParser=function(a){switch(a){case"number":return function(a){return parseInt(a)};default:return function(a){return a||""}}},p.prototype.append=f,p.prototype.empty=g,p.prototype.attr=function(a,b){return this.kattr("",a,b)},p.prototype.class=function(a,b){return this.kclass("",a,b)},p.prototype.doClick=function(){$("#"+this.ids[""]).click()},p.prototype.css=function(a,b){return this.kcss("",a,b)},p.prototype.defineProperty=function(b,c){var d;return d=a.isAccessor(c)?c:a.state(c),Object.defineProperty(this,b,{value:d,writable:!1,enumerable:!0,configurable:!1}),d},p.prototype.defineStatic=function(a,b){Object.defineProperty(this,a,{value:b,writable:!1,enumerable:!0,configurable:!1})},p.prototype.defineEvent=function(a){var b=this,c={},e="on"+a.charAt(0).toUpperCase()+a.slice(1),f="emit"+a.charAt(0).toUpperCase()+a.slice(1);this[e]=function(d){var e=c[a];return e||(e=c[a]=[]),e.push(d),b},this[f]=function(b){var e,f=new d(a),g=c[a];if(g){var h=[f];if(1===arguments.length)h=h.concat(b);else if(arguments.length>1)for(e=0;e<arguments.length;++e)h.push(arguments[e]);for(e=0;e<g.length&&(f.result=g[e].apply(null,h),!f.isDefaultPrevented());++e);}return f}},p.prototype.doFocus=function(a){"undefined"==typeof a&&(a=""),$("#"+this.id(a)).focus()},p.prototype.html=function(a){return this.khtml("",a)},p.prototype.id=function(a){return"string"!=typeof a?this.ids[""]:this.ids[a]},p.prototype.kattr=function(a,b,c){return c?void $("#"+this.ids[a]).attr(b,c):$("#"+this.ids[a]).attr(b)},p.prototype.kclass=function(a,b,c){return"add"===b?$("#"+this.ids[a]).addClass(c):"remove"===b?$("#"+this.ids[a]).removeClass(c):"toggle"===b&&$("#"+this.ids[a]).toggleClass(c),this},p.prototype.kcss=function(a,b,c){return c?($("#"+this.ids[a]).css(b,c),this):$("#"+this.ids[a]).css(b)},p.prototype.khtml=function(a,b){return b?void $("#"+this.id(a)).html(b):$("#"+this.id(a)).html(b)},p.prototype.onClick=h,p.prototype.onClickScrollTo=i,p.prototype.onEnterKey=j,p.prototype.onFocusOut=l,p.prototype.onHover=k,p.prototype.onResize=m,p.prototype.removeAttr=function(a){$("#"+this.id()).removeAttr(a)},p.prototype.slideDownOnClick=function(a,b){var c=this;$("#"+a.id()).click(function(){b?$("#"+c.id()).slideDown(b):$("#"+c.id()).slideDown()})},p.prototype.slideUpOnClick=function(a,b){var c=this;$("#"+a.id()).click(function(){b?$("#"+c.id()).slideUp(b):$("#"+c.id()).slideUp()})},p.prototype.width=function(){return $("#"+this.ids[""]).width()},a.multiviewSignature=function(a,b){var c=[];for(var d in b)b.hasOwnProperty(d)&&"view"!==d&&c.push(d+"="+b[d]);return["view="+a].concat(c.sort()).join("&")},q.prototype.begin=function(a,b){var c=t.$location;return this.active||c.search().hasOwnProperty("view")||this.push(a,b),this},q.create=function(a){var b=new q(a);return{begin:function(){return b.begin.apply(b,arguments),this},currentSignature:function(){return b.active?b.active.signature:""},include:function(){return b.include.apply(b,arguments),this},navigation:function(){return b.navigation.apply(b,arguments),this},push:function(){return b.push.apply(b,arguments),this},signature:function(){return b.signature.apply(b,arguments),this},view:function(){return b.view.apply(b,arguments),this}}},q.prototype.include=function(a){if("string"!=typeof a.name)throw new Error("Missing or invalid view name during multiview definition");return this.views[a.name]={name:a.name,included:v[a.path]},this},q.prototype.push=function(b,c){var d=this.views[b];if(!d)throw new Error("Unknown view: "+b);var e=this.signature(b,c);if(!this.active||this.active.signature!==e){var f=this.viewport;"function"==typeof d.viewport?(f.empty(),d.viewport(this.viewport,c)):"object"==typeof d.included&&a.resolve(d.included.opts.dependencies,[this.viewport],{$query:c}).onResolve(function(a){f.empty(),d.included.ctor.apply(null,a)});var g={signature:e};this.active=g;var h=t.$location;return h.search(this.active.signature),g}},q.prototype.navigation=function(a){return a(this.nav),this},q.prototype.signature=function(a,b){var c=[];for(var d in b)b.hasOwnProperty(d)&&"view"!==d&&c.push(d+"="+b[d]);return["view="+a].concat(c.sort()).join("&")},q.prototype.view=function(a){if("string"!=typeof a.name)throw new Error("Missing or invalid view name during multiview definition");if("function"!=typeof a.viewport)throw new Error("Missing or invalid viewport function during multiview definition");return this.views[a.name]={name:a.name,viewport:a.viewport},this},r.prototype.activate=function(a){if(console.log(a),!a.isActive()){a.child&&(a.child.detach(),a.child=null);var b=a.parent;b&&(b===this.root&&this.keepRootOpen||b.collapse(),b.child===a?a.expand():null!==b.child&&b.child.detach(),b.child=a),this.viewport.empty(),a.view(this.viewport,a.args),a.detached&&($("#"+this.control.id("stack")).append(a.element),a.detached=!1,$("#"+a.panel.id()).show(),$("#"+a.body.id()).show(),$("#"+a.id).show())}},r.prototype.begin=function(a,b){return this.keepRootOpen=b===!0,this.viewport.empty(),this.active||(console.log("no active"),this.push(null,a)),this},r.create=function(a){$("#"+z.ids[""]).addClass("workspace"),a=z.append(['<div alia-context class="container-fluid">','  <div alia-context="body" class="row"></div>',"</div>"].join(""));var b=new r({context:a,control:a.append("body",['<div alia-context class="col-lg-3">','  <div alia-context="stack" class="panel-group"></div>',"</div>"].join("")),viewport:a.append("body",['<div alia-context class="col-lg-9"></div>'].join("")),keepRootOpen:!1});return{begin:function(){return b.begin.apply(b,arguments),this},currentSignature:function(){return b.active.signature},define:function(){return b.define.apply(b,arguments),this},include:function(){return b.include.apply(b,arguments),this},push:function(a,c){console.log("external push"),b.root?b.push(b.root,a,c):(console.log(a),b.preload={name:a,args:c})},signature:function(a,c){return b.signature(a,c)}}},r.prototype.define=function(a){if("string"!=typeof a.name)throw new Error("Missing or invalid task name in definition");return this.definitions[a.name]={name:a.name,title:a.title,singleton:a.singleton===!0,control:a.control,view:a.view},this},r.prototype.include=function(){return this},r.prototype.push=function(b,c,d){var e=this.definitions[c];if(!e)throw new Error("Unknown task: "+c);if(!b&&!e.singleton)throw new Error("Attempted to add instance class with no parent");var f=this.signature(c,d),g=this.singletons[f];if(g)this.activate(g);else{var h=this.control.append("stack",['<div alia-context class="panel panel-default">','  <div alia-context="header" style="cursor: pointer;" class="panel-heading">','    <h4 alia-context="title" class="panel-title"></h4>',"  </div>","</div>"].join("")),i=h.append('<div alia-context class="panel-body"></div>'),j=a.state(e.title);i.defineProperty("title",j),i.title.assign(h,"khtml","title"),g=new s(this,{id:h.id(),parent:b,name:c,signature:f,args:d,panel:h,body:i,control:e.control,view:e.view}),e.singleton?this.singletons[f]=g:b.subtasks.push(g),i.push=g.push.bind(g),this.viewport.push=g.push.bind(g);var k=$("#"+h.id("header"));k.click(function(){this.activate(g)}.bind(this)),this.render(g),this.activate(g)}if(this.active=g,b){var l=t.$location;l.search(f)}return g},r.prototype.render=function(a){a.control(a.body,a.args),this.viewport.empty(),a.view(this.viewport,a.args)},r.prototype.signature=function(a,b){var c=[];for(var d in b)b.hasOwnProperty(d)&&"task"!==d&&c.push(d+"="+b[d]);return["task="+a].concat(c.sort()).join("&")},s.prototype.collapse=function(){$("#"+this.body.id()).slideUp(200)},s.prototype.detach=function(){function a(){0===--c&&(console.log("detach"),b.element.detach(),b.detached=!0)}for(var b=this,c=0,d=this;null!==d;)c+=2,$("#"+d.panel.id()).slideUp(200,a),$("#"+d.id).fadeOut(200,a),d=d.child},s.prototype.expand=function(){$("#"+this.body.id()).slideDown(200)},s.prototype.hasSubtask=function(a){for(var b=0;b<this.subtasks.length;++b)if(this.subtasks===a)return!0;return!1},s.prototype.isActive=function(){return this.workspace.active===this},s.prototype.isVisible=function(){for(var a=this.workspace.root;a!==this&&null!==a.child;)a=a.child;return a===this},s.prototype.push=function(a,b){return this.workspace.push(this,a,b)},a.defineControl=function(b,c){var d="do"+b.name.charAt(0).toUpperCase()+b.name.slice(1);a[d]=function(a,b){var d=c.call(a,b);return d}},a.defineHeader=function(b,c){a.resolve(b.dependencies).then(function(b){a.header.empty();var d=c.apply(null,b),e=d.call(null,a.header);return e})},a.defineLayout=function(b,c){var d="layout"+b.name.charAt(0).toUpperCase()+b.name.slice(1);a[d]=function(a,b,d){var e=c.call(a,b);return function(){return d(e),e}()}},a.defineModule=function(){},a.defineMultiview=function(b,c){a.defineView({path:b.path,dependencies:b.dependencies,multiview:!0},c)},a.defineProvider=function(a,b){if("string"!=typeof a.name||"$"!==a.name.substr(0,1))throw new Error("Missing or invalid provider name");var c=[],d=a.dependencies;if(d)for(var e=0;e<d.length;++e){if(!t.hasOwnProperty(d[e]))throw new Error("Unable to resolve provider dependency");c.push(t[d[e]])}t[a.name]=b.apply(null,c)},a.resolve=function(b,c,d){c=c||[];for(var e=0;e<b.length;++e)d&&d.hasOwnProperty(b[e])?c.push(d[b[e]]):t.hasOwnProperty(b[e])?c.push(t[b[e]]):u.hasOwnProperty(b[e])&&c.push(u[b[e]].accessor);return a.all(c)},a.defineService=function(b,c){console.log("--- DEFINE SERVICE:",b.name),u[b.name]={dependencies:b.dependencies,constructor:c,accessor:a.resolve(b.dependencies).then(function(a){return c.apply(null,a)})}},a.defineView=function(a,b){var c=t.$route;if(!c)throw new Error("Missing route provider");v[a.path]={opts:a,ctor:b},c.when(a,b),a.default===!0&&c.otherwise(a,b)},a.defineWidget=function(){},a.defineWorkspace=function(b,c){a.defineView({path:b.path,dependencies:b.dependencies,workspace:!0},c)},a.int=function(a){return parseInt(a,10)},a.lowercase=function(b){return a.isString(b)?b.toLowerCase():b},a.noop=function(){}}(window.alia=window.alia||{}),function(a,b){"use strict";function c(a,b,c,d,e){for(var f=0;e>f;++f)c[f+d]=a[f+b]}function d(a){this._capacity=a,this._length=0,this._front=0,this._makeCapacity()}function e(a,b,c){try{return a.call(b,c)}catch(d){return C.e=d,C}}function f(){this._isTickUsed=!1,this._schedule=A,this._length=0,this._lateBuffer=new d(16),this._functionBuffer=new d(65536);var a=this;this.consumeFunctionBuffer=function(){a._consumeFunctionBuffer()}}function g(){}function h(a,b,c){this._resolved=a===!0,this._value=b,this._failed=!1,this._errors=void 0,this._resolveHandlers=void 0,this._unresolveHandlers=void 0,this._errorHandlers=void 0,this._broadcastPending=!1,this._broadcastGroup=0,this._broadcastHandlers=void 0,this._finalized=c===!0}function i(a,b){h.call(this,a,b,!0)}function j(a,b){h.call(this,a,b)}function k(a,b){h.call(this),this._accessor=a,this._property=b,this._path=b.split(".");var c=this;a.observe(function(a){for(var b=1;b<c._path.length;++b){if(!a||!a.hasOwnProperty(c._path[b]))return c._unresolve();a=a[c._path[b]]}c._resolve(a)},function(){c._unresolve()},function(a){c._throw(a)})}function l(a,b){return function(){if(a._itemsResolved[b]=!0,_.every(a._itemsResolved)){for(var c=[],d=0;d<a._items.length;++d)c.push(a._items[d]._value);a._resolve(c)}}}function m(a,b){return function(){a._itemsResolved[b]=!1,a._unresolve()}}function n(a){return function(b){a._throw(b)}}function o(b){h.call(this),this._accessor=b,this._items=void 0,this._itemsResolved=void 0;var c=this;b.observe(function(b){if(c._items=[],c._itemsResolved=[],0===b.length)c._resolve([]);else for(var d=0;d<b.length;++d){c._items.push(b[d]),c._itemsResolved.push(!1);var e=b[d];e instanceof h||(c._items[d]=e=a.constant(e)),e.observe(l(c,d),m(c,d),n(c))}},function(){c._items=void 0,c._itemsResolved=void 0,c._unresolve()},function(a){c._throw(a)})}function p(a,b){return function(c){a._object[b]=c,_.every(a._object,g.not)&&a._resolve(_.clone(a._object))}}function q(a,b){return function(){a._object[b]=new g,a._unresolve()}}function r(a){return function(b){a._throw(b)}}function s(a){h.call(this),this._object={};var b=0,c=this;for(var d in a)a[d]instanceof h?(b++,a[d].observe(p(c,d),q(c,d),r(c))):c._object[d]=a[d];0===b&&c._resolve(this._object,!0)}function t(a,c){return function(){if(a._accessorsResolved[c]=!0,_.every(a._accessorsResolved)){for(var d=[],e=0;e<a._accessors.length;++e)d.push(a._accessors[e]._value);var f=a._fcn.apply(b,d);f instanceof h?f.observe(function(b){a._resolve(b)},function(){a._unresolve()},function(b){a._throw(b)}):a._resolve(f)}}}function u(a,b){return function(){a._accessorsResolved[b]=!1,a._unresolve()}}function v(a){return function(b){a._throw(b)}}function w(){h.call(this),this._fcn=arguments[arguments.length-1],this._accessors=[],this._accessorsResolved=[];for(var b=this,c=0;c<arguments.length-1;++c){b._accessors.push(arguments[c]),b._accessorsResolved.push(!1);var d=arguments[c];d instanceof h||(b._accessors[c]=d=a.constant(d)),d.observe(t(b,c),u(b,c),v(b))}}function x(c,d){h.call(this),this._fcn=d,this._args=a.all(c);var e=this;this._args.observe(function(a){var c=e._fcn.apply(b,a);c instanceof h?c.observe(function(a){e._resolve(a)},function(){e._unresolve()},function(a){e._throw(a)}):e._resolve(c)},function(){e._unresolve()},function(a){e._throw(a)})}function y(a){h.call(this);var b=this;a.then(function(a){b._resolve(a,!0)},function(a){b._throw(a)})}function z(a,b){h.call(this),this._accessor=a,this._delay=b,this._timeout=null;var c=this;a.observe(function(a){c._timeout&&clearTimeout(c._timeout),c._timeout=setTimeout(function(){c._resolve(a),c._timeout=null},c._delay)},function(){c._unresolve()},function(a){c._throw(a)})}var A,B;if("object"==typeof process&&"string"==typeof process.version)A=function(a){process.nextTick(a)};else if("undefined"!=typeof MutationObserver&&(B=MutationObserver)||"undefined"!=typeof WebKitMutationObserver&&(B=WebKitMutationObserver))A=function(){var a=document.createElement("div"),b=void 0,c=new B(function(){var a=b;b=void 0,a()});return c.observe(a,{attributes:!0}),function(c){b=c,a.setAttribute("class","foo")}}();else{if("undefined"==typeof setTimeout)throw new Error("no async scheduler available");A=function(a){setTimeout(a,0)}}d.prototype._willBeOverCapacity=function(a){return this._capacity<a},d.prototype._pushOne=function(a){var b=this.length();this._checkCapacity(b+1);var c=this._front+b&this._capacity-1;this[c]=a,this._length=b+1},d.prototype.push=function(a,b,c){var d=this.length()+3;if(this._willBeOverCapacity(d))return this._pushOne(a),this._pushOne(b),void this._pushOne(c);var e=this._front+d-3;this._checkCapacity(d);var f=this._capacity-1;this[e+0&f]=a,this[e+1&f]=b,this[e+2&f]=c,this._length=d},d.prototype.shift=function(){var a=this._front,b=this[a];return this[a]=void 0,this._front=a+1&this._capacity-1,this._length--,b},d.prototype.length=function(){return this._length},d.prototype._makeCapacity=function(){for(var a=this._capacity,b=0;a>b;++b)this[b]=void 0},d.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<3)},d.prototype._resizeTo=function(a){var b=this._front,d=this._capacity,e=new Array(d),f=this.length();if(c(this,0,e,0,d),this._capacity=a,this._makeCapacity(),this._front=0,d>=b+f)c(e,b,this,0,f);else{var g=f-(b+f&d-1);c(e,b,this,0,g),c(e,0,this,g,f-g)}};var C={e:{}},D="undefined"!=typeof process?process:void 0;f.prototype.haveItemsQueued=function(){return this._length>0},f.prototype.invokeLater=function(a,b,c){void 0===D||null===D.domain||a.domain||(a=D.domain.bind(a)),this._lateBuffer.push(a,b,c),this._queueTick()},f.prototype.invoke=function(a,b,c){void 0===D||null===D.domain||a.domain||(a=D.domain.bind(a));var d=this._functionBuffer;d.push(a,b,c),this._length=d.length(),this._queueTick()},f.prototype._consumeFunctionBuffer=function(){for(var a=this._functionBuffer;a.length()>0;){var b=a.shift(),c=a.shift(),d=a.shift();b.call(c,d)}this._reset(),this._consumeLateBuffer()},f.prototype._consumeLateBuffer=function(){for(var a=this._lateBuffer;a.length()>0;){var b=a.shift(),c=a.shift(),d=a.shift(),f=e(b,c,d);if(f===C){if(this._queueTick(),null===b.domain)throw f.e;b.domain.emit("error",f.e)}}},f.prototype._queueTick=function(){this._isTickUsed||(this._schedule(this.consumeFunctionBuffer),this._isTickUsed=!0)},f.prototype._reset=function(){this._isTickUsed=!1,this._length=0};var E=new f;g.is=function(a){return a instanceof g},g.not=function(a){return!(a instanceof g)},h.prototype._broadcast=function(){var a,b;if(16&this._broadcastGroup?a=this._value:32&this._broadcastGroup&&(a=this._errors),1&this._broadcastGroup&&this._resolveHandlers)for(b=0;b<this._resolveHandlers.length;++b)this._resolveHandlers[b].call(void 0,a);if(2&this._broadcastGroup&&this._unresolveHandlers)for(b=0;b<this._unresolveHandlers.length;++b)this._unresolveHandlers[b].call(void 0,a);if(4&this._broadcastGroup&&this._errorHandlers)for(b=0;b<this._errorHandlers.length;++b)this._errorHandlers[b].call(void 0,a);if(8&this._broadcastGroup)for(b=0;b<this._broadcastHandlers.length;++b)this._broadcastHandlers[b].call(void 0,a);this._finalized&&(this._resolveHandlers=void 0,this._unresolveHandlers=void 0,this._errorHandlers=void 0),this._broadcastPending=!1,this._broadcastGroup=0,this._broadcastHandlers=void 0},h.prototype._finalize=function(){this._finalized=!0,this._broadcastPending||(this._resolveHandlers=void 0,this._unresolveHandlers=void 0,this._errorHandlers=void 0,this._broadcastGroup=0,this._broadcastHandlers=void 0)},h.prototype._resolve=function(a,b){if("function"!=typeof b){if(this._resolved&&this._value===a)return;this._resolved=!0,this._value=a,this._failed=!1,this._errors=void 0,this._broadcastGroup=17,this._broadcastHandlers=void 0}else if(0===this._broadcastGroup)this._broadcastGroup=24,this._broadcastHandlers=[b];else if(24===this._broadcastGroup)this._broadcastHandlers.push(b);else if(!(1&this._broadcastGroup))throw new Error("Unable to prime resolve to group "+this._broadcastGroup);this._broadcastPending||(this._broadcastPending=!0,E.invoke(this._broadcast,this))},h.prototype._throw=function(a,b){var c=this._resolved;if(b){if(c)throw new Error("Unable to initialize throw with handler");if(0===this._broadcastGroup)this._broadcastGroup=40,this._broadcastHandlers=[b];else if(40===this._broadcastGroup)this._broadcastHandlers.push(b);else if(!(4&this._broadcastGroup))throw new Error("Unable to prime throw to group "+this._broadcastGroup)}else this._resolved=!1,this._value=void 0,this._failed=!0,void 0===this._errors&&(this._errors=[]),this._errors.push(a),this._broadcastGroup=c?38:36,this._broadcastHandlers=void 0;this._broadcastPending||(this._broadcastPending=!0,E.invoke(this._broadcast,this))},h.prototype._unresolve=function(){this._resolved&&(this._resolved=!1,this._value=void 0,this._failed=!1,this._errors=void 0,this._broadcastGroup=2,this._broadcastHandlers=void 0,this._broadcastPending||(this._broadcastPending=!0,E.invoke(this._broadcast,this)))},h.prototype.get=function(){return this._resolved?_.clone(this._value):void 0},h.prototype.isGettable=function(){return!0},h.prototype.isSettable=function(){return"function"==typeof this.set},h.prototype.observe=function(a,b,c){return"function"==typeof a&&(this._resolveHandlers||(this._resolveHandlers=[]),this._resolveHandlers.push(a),this._resolved&&this._resolve(this._value,a)),"function"==typeof b&&(this._unresolveHandlers||(this._unresolveHandlers=[]),this._unresolveHandlers.push(b)),"function"==typeof c&&(this._errorHandlers||(this._errorHandlers=[]),this._errorHandlers.push(c),this._failed&&this._throw(this._errors,c)),this},h.prototype.onResolve=function(a){return this.observe(a,null,null)},h.prototype.onUnresolve=function(a){return this.observe(null,a,null)},h.prototype.onError=function(a){return this.observe(null,null,a)},h.prototype.isObject=function(){var a=new j;return this.observe(function(b){a.set("object"==typeof b)},function(){a.set(!1)},function(b){a._throw(b)}),a},h.prototype.isResolved=function(){var a=new j;return this.observe(function(){a.set(!0)},function(){a.set(!1)},function(b){a._throw(b)}),a},h.prototype.isUndefined=function(){var a=new j;return this.observe(function(b){a.set(void 0===b)},function(){a.set(!0)},function(b){a._throw(b)}),a},h.prototype.at=function(a){return new k(this,"."+a)},h.prototype.delay=function(a){return new z(this,a)},h.prototype.not=function(){var a=new j;return this.observe(function(b){a.set(!b)},function(){a._unresolve()},function(b){a._throw(b)}),a},h.prototype.property=function(a){return new k(this,a)},h.prototype.startWith=function(a){return this._resolved||this._resolve(a),this},h.prototype.then=function(a){return new x([this],a)},i.prototype=_.create(h.prototype),j.prototype=_.create(h.prototype),j.prototype.set=function(a){this._resolve(a)},k.prototype=_.create(h.prototype),k.prototype.set=function(a){for(var b=this._accessor.get()||{},c=b,d=this._path.length-1,e=1;d>e;++e)c.hasOwnProperty(this._path[e])||(c[this._path[e]]={}),c=c[this._path[e]]||{};c[this._path[d]]=a,this._accessor.set(b)},o.prototype=_.create(h.prototype),s.prototype=_.create(h.prototype),w.prototype=_.create(h.prototype),x.prototype=_.create(h.prototype),y.prototype=_.create(h.prototype),z.prototype=_.create(h.prototype),a.isAccessor=function(a){return a instanceof h},a.all=function(b){return a.isAccessor(b)||(b=a.constant(b)),new o(b)},a.cast=function(a){return a instanceof h?a:new j(!0,a)},a.constant=function(a){return 0===arguments.length?new i:new i(!0,a)},a.deferred=function(a){return new y(new Promise(a))},a.future=function(a){for(var b=[],c=1;c<arguments.length;++c)b.push(arguments[c]);return new x(a,b)},a.join=function(){var a=Object.create(w.prototype);return w.apply(a,arguments),a},a.state=function(a){if(0===arguments.length)return new j;if(a instanceof h){var b=new j;return a.observe(function(a){b.set(a)},function(){b._unresolve()},function(a){b._throw(a)}),b}return new j(!0,a)},a.promise=function(a){return new y(a)},a.props=function(a){return new s(a||{})}}(window.alia=window.alia||{}),function(a){"use strict";function b(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=d(b[c]);return b.join("/")}function c(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function d(a){return c(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function e(b){var c=a.isString(b)?a.url.resolve(b):b;return c.protocol===k.protocol&&c.host===k.host}function f(b){for(var c={},d=(b||"").split("&"),e=0;e<d.length;++e){var f=d[e];if(f){var g=f.split("="),h=i(g[0]);if(a.isDefined(h)){var j=a.isDefined(g[1])?i(g[1]):!0;c[h]?a.isArray(c[h])?c[h].push(j):c[h]=[c[h],j]:c[h]=j}}}return c}function g(b){var c=b;return a.msie&&(j.setAttribute("href",c),c=j.href),j.setAttribute("href",c),{href:j.href,protocol:j.protocol?j.protocol.replace(/:$/,""):"",host:j.host,search:j.search?j.search.replace(/^\?/,""):"",hash:j.hash?j.hash.replace(/^#/,""):"",hostname:j.hostname,port:j.port,pathname:"/"===j.pathname.charAt(0)?j.pathname:"/"+j.pathname}}function h(b){var d=[];for(var e in b)if(b.hasOwnProperty(e)){var f=b[e];if(a.isArray(f))for(var g=0;g<f.length;++g){var h=f[g];d.push(c(e,!0)+(h===!0?"":"="+c(h,!0)))}else d.push(c(e,!0)+(f===!0?"":"="+c(f,!0)))}return d.length?d.join("&"):""}function i(a){try{return decodeURIComponent(a)}catch(b){}}var j=document.createElement("a"),k=g(window.location.href,!0);a.url={encodePath:b,encodeUriSegment:d,encodeUriQuery:c,isSameOrigin:e,parseQuery:f,resolve:g,toQueryString:h,tryDecodeURIComponent:i}}(window.alia=window.alia||{}),function(a){"use strict";a.isArray=function(a){return"[object Array]"===toString.call(a)
},a.isArrayLike=function(b){if(null===b||isWindow(b))return!1;var c=b.length;return 1===b.nodeType&&c?!0:a.isString(b)||a.isArray(b)||0===c||"number"==typeof c&&c>0&&c-1 in b},a.isDefined=function(a){return"undefined"!=typeof a},a.isNull=function(a){return null===a},a.isNotNull=function(a){return null!==a},a.isObject=function(a){return null!==a&&"object"==typeof a},a.isString=function(a){return"string"==typeof a},a.isEmptyString=function(a){return"string"!=typeof a||0===a.length},a.isNotEmptyString=function(a){return"string"==typeof a&&a.length>0},a.isUndefined=function(a){return"undefined"==typeof a},a.isNotUndefined=function(a){return"undefined"!=typeof a},a.isWindow=function(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}}(window.alia=window.alia||{}),function(a,b){"use strict";b.defineControl({name:"alert"},function(){var c={success:"alert-success",info:"alert-info",warning:"alert-warning",danger:"alert-danger"};return function(d){var e=["alia-alert"];"string"==typeof d.type&&c.hasOwnProperty(d.type)&&e.push(c[d.type]);var f=b.alerts.append(['<div class=":class" alia-context>','  <span alia-context="content"></span>','  <button alia-context="close" type="button" class="close">&times;</button>',"</div>"].join(""),{"class":e.join(" ")});return"number"==typeof d.autohide&&setTimeout(function(){a("#"+f.id()).fadeOut(500,function(){a(this).remove()})}.bind(this),d.autohide),b.isAccessor(d.text)?d.text.onResolve(function(a){f.khtml("content",a)}):f.khtml("content",d.text),a("#"+f.id("close")).click(function(){a("#"+f.id()).remove()}),f}}())}($,alia),function(a,b,c){"use strict";b.defineControl({name:"button"},function(){var d={"default":"btn-default",primary:"btn-primary",success:"btn-success",info:"btn-info",warning:"btn-warning",danger:"btn-danger",link:"btn-link"},e={large:"btn-lg",small:"btn-sm",xsmall:"btn-xs"},f={none:null,"expand-right":"expand-right"};return function(g){b.applyDefaults(g,{disabled:!1,loadingStyle:"none",progress:null,visible:!0},{loadingStyle:f});var h=["btn"];"boolean"==typeof g.close&&g.close?h[0]="close":(h.push("string"==typeof g.style&&d.hasOwnProperty(g.style)?d[g.style]:d["default"]),"string"==typeof g.size&&e.hasOwnProperty(g.size)&&h.push(e[g.size]));var i,j,k,l,m;return b.isAccessor(g.loading)?(j='<button alia-context type="button" class=":class ladda-button" data-style=":loadingStyle">  <span alia-context="label" class="ladda-label"></span></button>',i=this.append(j,{"class":h.join(" "),loadingStyle:f[g.loadingStyle]}),k=a("#"+i.id()),m=a("#"+i.id("label")),l=c.create(k[0]),i.bindHtml("label","text",g.text),i.bindDisabled(g.disabled),i.defineProperty("loading",g.loading).onResolve(function(a){a!==l.isLoading()&&l.toggle()})):(j='<button alia-context type="button" class=":class"></button>',i=this.append(j,{"class":h.join(" ")}),k=a("#"+i.id()),i.bindHtml("text",g.text),i.bindDisabled(g.disabled)),i.bindVisible(g.visible),i}}()),b.defineLayout({name:"buttonAddon"},function(){var a=this.append('<span alia-context class="input-group-btn"></span>');return a}),b.defineLayout({name:"buttonGroup"},function(){var a={large:"btn-group-lg",small:"btn-group-sm",xsmall:"btn-group-xs"};return function(b){var c=["btn-group"];return b.vertical===!0&&(c[0]+="-vertical"),"string"==typeof b.size&&a.hasOwnProperty(b.size)&&c.push(a[b.size]),"boolean"==typeof b.justified&&b.justified&&c.push("btn-group-justified"),this.append('<div alia-context class=":class"></div>',{"class":c.join(" ")})}}()),b.defineControl({name:"buttonRadioGroup"},function(){return function(c){b.applyDefaults(c,{currentIndex:0});var d=[],e=-1,f=function(a){return function(){h.set(a)}},g=b.layoutButtonGroup(this,{},function(e){for(var g=0;g<c.options.length;++g){var h=b.doButton(e,{text:c.options[g]}).onClick(f(g));d.push({text:c.options[g],btn:h,j:a("#"+h.id())})}}),h=g.defineProperty("currentIndex",c.currentIndex);return h.onResolve(function(a){if(e!==a){if(null!==e&&e>-1){var b=d[e];b.j.removeClass("btn-info"),b.j.addClass("btn-default")}if(null!==a&&a>-1){var c=d[a];c.j.removeClass("btn-default"),c.j.addClass("btn-info")}e=a}}),g}}())}($,alia,Ladda),function(a,b){"use strict";b.defineLayout({name:"carousel"},function(){return function(a){var b=['<div alia-context class="carousel slide" data-ride="carousel">','  <ol alia-context="indicators" class="carousel-indicators"></ol>','  <div alia-context="items" class="carousel-inner"></div>',"</div>"],c=this.append(b.join(""));"number"==typeof a.auto&&c.attr("data-interval",a.auto);var d=['<a class="left carousel-control" data-target=":target" data-slide="prev">','  <span class="glyphicon glyphicon-chevron-left"></span>',"</a>",'<a class="right carousel-control" data-target=":target" data-slide="next">','  <span class="glyphicon glyphicon-chevron-right"></span>',"</a>"];return c.append(d.join(""),{target:"#"+c.ids[""]}),c}}()),b.defineLayout({name:"carouselItem"},function(){return function(b){var c=["item"];"boolean"==typeof b.active&&b.active===!0&&c.push("active");var d=this.append("items",'<div alia-context class=":class"></div>',{"class":c.join(" ")}),e=a("#"+this.id("indicators")+" li").length,f=[];return"boolean"==typeof b.active&&b.active===!0&&f.push("active"),this.append("indicators",'<li data-target=":target" data-slide-to=":no" class=":class"></li>',{no:e,target:"#"+this.id(),"class":f.join(" ")}),d}}())}($,alia),function(a,b,c){"use strict";b.defineControl({name:"donutChart"},function(){return function(d){function e(a){var b=c.interpolate(this._current,a);return this._current=b(0),function(a){return k(b(a))}}b.defaults(d,{visible:!0});var f=960,g=500,h=Math.min(f,g)/2,i=c.scale.category20(),j=c.layout.pie().value(function(a){return a}).sort(null),k=c.svg.arc().innerRadius(h-100).outerRadius(h-20),l=this.append("<div alia-context></div>"),m=a("#"+l.id()),n=c.select(m[0]).append("svg").attr("width",f).attr("height",g).append("g").attr("transform","translate("+f/2+","+g/2+")"),o=null;return d.data.onResolve(function(a){if(null===o){for(var b=[],c=0;c<a.length;++c)b.push(c);o=n.datum(b).selectAll("path").data(j).enter().append("path").attr("fill",function(a,b){return i(b)}).attr("d",k).each(function(a){this._current=a})}j.value(function(b){return a[b]}),o=o.data(j),o.attr("d",k),o.transition().duration(750).attrTween("d",e)}),l}}())}($,alia,d3),function(a,b){"use strict";b.defineLayout({name:"div"},function(){var a={right:"pull-right",left:"pull-left"};return function(c){b.applyDefaults(c,{visible:!0});var d=[];"string"==typeof c.classes?d=c.classes.split(","):Array.isArray(c.classes)&&(d=c.classes),"string"==typeof c.float&&a.hasOwnProperty(c.float)&&d.push(a[c.float]);var e=this.append('<div alia-context class=":class"></div>',{"class":d.join(" ")});return"object"==typeof c.width?(c.width.hasOwnProperty("percent")&&"number"==typeof c.width.percent&&(e.css("width",c.width.percent+"%"),e.css("white-space","nowrap"),e.css("overflow-x","auto")),c.width.hasOwnProperty("pixel")&&"number"==typeof c.width.pixel&&(e.css("width",c.width.pixel+"px"),e.css("white-space","nowrap"),e.css("overflow-x","auto"))):"string"==typeof c.width&&"auto"===c.width&&e.css("width","auto"),e.bindVisible(c.visible),e}}()),b.defineLayout({name:"container"},function(){var a={fixed:"container",fluid:"container-fluid"};return function(b){var c=[];return"string"==typeof b.type&&a.hasOwnProperty(b.type)&&c.push(a[b.type]),this.append('<div alia-context class=":class"></div>',{"class":c.join(" ")})}}()),b.defineLayout({name:"row"},function(){var a=this.append('<div alia-context class="row"></div>');return a}),b.defineLayout({name:"column"},function(){var a={large:"lg",medium:"md",small:"sm",xsmall:"xs"};return function(c){b.applyDefaults(c,{visible:!0});var d,e=[];if(c.width&&"object"==typeof c.width&&!Array.isArray(c.width))for(d in c.width)a.hasOwnProperty(d)&&e.push("col-"+a[d]+"-"+c.width[d]);if(c.offset&&"object"==typeof c.offset&&!Array.isArray(c.width))for(d in c.offset)a.hasOwnProperty(d)&&e.push("col-"+a[d]+"-offset-"+c.offset[d]);var f=this.append('<div alia-context class=":class"></div>',{"class":e.join(" ")});return f.bindVisible(c.visible),f}}()),b.defineLayout({name:"affix"},function(){return function(a){var b=this.append("<div alia-context></div>");return"number"==typeof a.top&&(b.css("position","fixed"),b.css("top",a.top)),b}}()),b.defineLayout({name:"well"},function(){var a={large:"well-lg",small:"well-sm"};return function(b){var c=["well"];"string"==typeof b.size&&a.hasOwnProperty(b.size)&&c.push(a[b.size]);var d=this.append('<div alia-context class=":class"></div>',{"class":c.join(" ")});return d}}())}($,alia),function(a,b){"use strict";b.defineLayout({name:"dropdown"},function(){return function(c){b.applyDefaults(c,{visible:!0});var d=this.append(['<div alia-context class="dropdown">','  <a alia-context="toggler"></a>',"</div>"].join(""));return b.isAccessor(c.text)?c.text.onResolve(function(b){a("#"+d.id("toggler")).html(b)}):a("#"+d.id("toggler")).html(c.text),a("html").click(function(){d.class("remove","open")}),a("#"+d.id("toggler")).click(function(a){d.class("add","open"),a.stopPropagation()}),d.bindVisible(c.visible),d}}()),b.defineLayout({name:"dropdownMenu"},function(){return this.append('<ul alia-context class="dropdown-menu" role="menu"></ul>')}),b.defineLayout({name:"dropdownItem"},function(){return this.append("<li alia-context></li>")}),b.defineControl({name:"dropdownItem"},function(){return function(a){b.applyDefaults(a,{visible:!0});var c=this.append('<li><a alia-context style="cursor: pointer"></a></li>').bindHtml("text",a.text);return"string"==typeof a.link&&c.attr("href",a.link),c.bindVisible(a.visible),c}}()),b.defineControl({name:"dropdownDivider"},function(){return this.append('<li alia-context class="divider"></li>')}),b.defineControl({name:"dropdownHeader"},function(){return function(a){var b=this.append('<li role="presentation" class="dropdown-header">:text</li>',{text:a.text});return b.bindHtml("text",a.text),b}}())}($,alia),function(a,b,c){"use strict";b.defineControl({name:"editableTextbox"},function(){var d={text:"text",email:"email",number:"number",password:"password"},e={lines:9,length:5,width:1.5,radius:2.7,corners:.8,rotate:0,direction:1,color:"#000",speed:2.2,trail:45,shadow:!1,hwaccel:!1,className:"spinner"};return function(f){b.applyDefaults(f,{type:"text",disabled:!1,visible:!0,deferred:!0},{type:d});var g=this.append('<div alia-context class="editable-element text-toggle"></div>');b.doText(g,{text:f.text}).class("add","editable-text").onClick(function(){g.class("toggle","text-toggle"),k.focus()}).onHover(function(){h.class("add","visible")},function(){h.class("remove","visible")});var h=b.doIcon(g,{name:"pencil"}),i=g.append('<form alia-context class="editable-form"></form>'),j=i.append('<input alia-context type=":type">',{type:f.type}).onFocusOut(function(){f.deferred===!1&&(g.class("toggle","text-toggle"),p.isSettable()&&p.set(q.get()))}),k=a("#"+j.id());if(f.deferred){var l=i.append('<div alia-context class="save-options"></div>');b.layoutButtonGroup(l,{size:"small"},function(c){var d=b.doButton(c,{}).onClick(function(){var c=q.get(),d=function(){o.stop(),g.class("toggle","text-toggle"),p.set(c)},e=function(a){o.stop(),b.error(a)};o.spin(n),a(o.el).removeAttr("style"),g.emitSubmit(c,d,e)});b.doIcon(d,{name:"ok"});var e=b.doButton(c,{}).onClick(function(){g.class("toggle","text-toggle"),q.set(p.get())});b.doIcon(e,{name:"remove"})});var m=g.append('<span alia-context class="spinner"></span>'),n=a("#"+m.id(""))[0],o=new c(e)}var p=j.defineProperty("text",f.text),q=b.state();return p.onResolve(f.deferred===!0?function(a){q.set(a),f.text.set(a)}:function(a){q.set(a)}),j.bindText("edited",q,f.type),g.defineEvent("submit"),g}}()),b.defineControl({name:"editableBoolean"},function(){var d={"y/n":"y/n","t/f":"t/f"},e={lines:9,length:5,width:1.5,radius:2.7,corners:.8,rotate:0,direction:1,color:"#000",speed:2.2,trail:45,shadow:!1,hwaccel:!1,className:"spinner"};return function(f){b.applyDefaults(f,{type:"t/f",disabled:!1,visible:!0},{type:d});var g=this.append('<div alia-context class="editable-element text-toggle"></div>');b.doText(g,{text:"function"==typeof f.map?f.map(f.value):f.value}).class("add","editable-text").onClick(function(){g.class("toggle","text-toggle")}).onHover(function(){h.class("add","visible")},function(){h.class("remove","visible")});var h=b.doIcon(g,{name:"pencil"}),i=g.append('<form alia-context class="editable-form"></form>'),j=i.append(["<select alia-context>",'  <option value="true">:textTrue</option>','  <option value="false">:textFalse</option>',"</select>"].join(""),{textTrue:"t/f"===f.type?"True":"Yes",textFalse:"t/f"===f.type?"False":"No"}),k=i.append('<div alia-context class="save-options"></div>');b.layoutButtonGroup(k,{size:"small"},function(c){var d=b.doButton(c,{}).onClick(function(){var c="true"===p.get()?!0:!1,d=function(){n.stop(),g.class("toggle","text-toggle"),o.set(c)},e=function(a){n.stop(),b.error(a)};n.spin(m),a(n.el).removeAttr("style"),g.emitSubmit(c,d,e)});b.doIcon(d,{name:"ok"});var e=b.doButton(c,{}).onClick(function(){g.class("toggle","text-toggle"),p.set(o.get()?"true":"false")});b.doIcon(e,{name:"remove"})});var l=g.append('<span alia-context class="spinner"></span>'),m=a("#"+l.id(""))[0],n=new c(e),o=j.defineProperty("bool",f.value),p=b.state(f.value===!0?"true":"false");return j.bindText("text",p,"text"),g.defineEvent("submit"),g}}()),b.defineControl({name:"editableMarkdown"},function(){return function(a){b.applyDefaults(a,{visible:!0});var c=this.append("<div alia-context>test</div>");return c}}())}($,alia,Spinner),function(a,b){"use strict";b.defineLayout({name:"form"},function(){var a={"default":"form",horizontal:"form-horizontal",inline:"form-inline"},b={left:"navbar-form navbar-left",right:"navbar-form navbar-right"};return function(c){"string"==typeof c.style&&a.hasOwnProperty(c.style)||(c.style=a.default);var d=[a[c.style]];"string"==typeof c.position&&b.hasOwnProperty(c.position)&&d.push(b[c.position]);var e=this.append('<form alia-context class=":class"></form>',{"class":d.join(" ")});return e.defineStatic("style",c.style),e}}()),b.defineLayout({name:"formField"},function(){var a={large:"lg",medium:"md",small:"sm",xsmall:"xs"};return function(b){var c,d;switch(this.style){case"horizontal":if(d=["control-label"],"object"==typeof b.labelwidth&&!Array.isArray(b.labelwidth))for(c in b.labelwidth)a.hasOwnProperty(c)&&d.push("col-"+a[c]+"-"+b.labelwidth[c]);if("object"==typeof b.labeloffset&&!Array.isArray(b.labeloffset))for(c in b.labeloffset)a.hasOwnProperty(c)&&d.push("col-"+a[c]+"-offset-"+b.labeloffset[c]);var e=[];if("object"==typeof b.width&&!Array.isArray(b.width))for(c in b.width)a.hasOwnProperty(c)&&e.push("col-"+a[c]+"-"+b.width[c]);if("object"==typeof b.offset&&!Array.isArray(b.offset))for(c in b.offset)a.hasOwnProperty(c)&&e.push("col-"+a[c]+"-offset-"+b.offset[c]);return"string"==typeof b.special&&"checkbox"===b.special?this.append('<div class="form-group">  <div class=":class">    <div class="checkbox">      <label alia-context></label>    </div>  </div></div>',{"class":e.join(" ")}):"string"==typeof b.special&&"button"===b.special?this.append('<div class="form-group">  <div alia-context class=":class">  </div></div>',{"class":e.join(" ")}):this.append('<div class="form-group">  <label class=":labelclass">:text</label>  <div alia-context class=":class"></div></div>',{labelclass:d.join(" "),"class":e.join(" "),text:b.text});case"inline":case"default":return d=["sr-only"],"boolean"==typeof b.checkbox&&b.checkbox?this.append('<div class="checkbox">  <label alia-context></label></div>',{}):this.append('<div alia-context class="form-group">  <label class=":labelclass">:text</label></div>',{labelclass:d.join(" "),text:b.text})}}}()),b.defineControl({name:"form"},function(){function a(a,c,d,e){switch(c.type){case"checkbox":b.layoutFormField(a,{special:"checkbox",offset:e.label,width:e.control},function(a){var e=b.doCheckbox(a,{checked:d.property(c.lens)});b.doText(a,{text:c.label}),d.property(c.lens).onUnresolve(function(){e.checked.set(null)})});break;case"textbox":b.layoutFormField(a,{text:c.label,labelwidth:e.label,width:e.control},function(a){var e=b.doTextbox(a,{text:d.property(c.lens),type:c.datatype||"text",placeholder:c.placeholder||"",disabled:c.disabled});d.property(c.lens).onUnresolve(function(){e.text.set(null)})});break;case"typeahead":b.layoutFormField(a,{text:c.label,labelwidth:e.label,width:e.control},function(a){var e=b.doTypeahead(a,{value:d.property(c.lens),type:c.sourcetype,pool:c.source,editable:c.editable});d.property(c.lens).onUnresolve(function(){e.text.set(null),e.value.set(null)})});break;case"datepicker":b.layoutFormField(a,{text:c.label,labelwidth:e.label,width:e.control},function(a){var e=b.doDatepicker(a,{placeholder:"Enter Date",date:d.property(c.lens)});d.property(c.lens).onUnresolve(function(){e.date.set(null)})})}}return function(c){var d,e=this.append("<div alia-context></div>");d=b.isAccessor(c.model)?c.model:b.state(c.model);var f=c.fields;return b.layoutForm(e,{style:"horizontal"},function(b){for(var e=0;e<f.length;++e){var g=f[e];a(b,g,d,c)}}),e.getData=function(){return d.get()},e.refresh=function(){},e}}())}($,alia),function(a,b){"use strict";b.defineControl({name:"icon"},function(){return function(a){var c=["glyphicon"];"string"==typeof a.name&&c.push("glyphicon-"+a.name);var d=this.append('<span alia-context class=":class"> </span>',{"class":c.join(" ")});return b.isAccessor(a.name)&&a.name.onResolve(function(a){var b=["glyphicon"];"string"==typeof a&&b.push("glyphicon-"+a),d.removeAttr("class"),d.attr("class",b.join(" "))}),d}}())}($,alia),function(a,b,c){"use strict";b.defineControl({name:"textbox"},function(){var a={large:"input-lg",small:"imput-sm"},c={text:"text",email:"email",number:"number",password:"password"};return function(d){b.applyDefaults(d,{type:c.text,disabled:!1,visible:!0});var e=["form-control"];"string"==typeof d.size&&a.hasOwnProperty(d.size)&&e.push(a[d.size]);var f=this.append('<input alia-context type=":type" class=":class">',{type:d.type,"class":e.join(" ")});return"string"==typeof d.placeholder&&f.attr("placeholder",d.placeholder),f.bindDisabled(d.disabled),f.bindText(d.text,d.type),f.bindVisible(d.visible),f}}()),b.defineControl({name:"checkbox"},function(){return function(a){b.applyDefaults(a,{checked:!1,visible:!0});var c=this.append('<input alia-context type="checkbox">'),d=c.defineProperty("checked",a.checked);return c.bindCheckboxField(d),c.bindVisible(a.visible),c}}()),b.defineControl({name:"textarea"},function(){return function(a){b.applyDefaults(a,{visible:!0,resize:"both"});var c=this.append('<textarea alia-context rows=":rows" class="form-control" style="resize::resize"></textarea>',{rows:a.rows,resize:a.resize});return"string"==typeof a.placeholder&&c.attr("placeholder",a.placeholder),c.css("width","100%"),c.bindText(a.text,"text"),c.bindVisible(a.visible),c}}()),b.defineControl({name:"select"},function(){function c(b,c){if(Array.isArray(c)){for(var d=0;d<c.length;++d){var e=c[d];"string"==typeof e||"number"==typeof e?b.append('<option value=":text">:text</option>',{text:e}):b.append('<option value=":value">:text</option>',{value:e.hasOwnProperty("value")?e.value:e.text,text:e.text})}a("#"+b.id()).trigger("change")}}function d(a,b){var c=0;b.property(".length").onResolve(function(d){if(c>d)c=d;else for(var f=c;d>f;++f){var g=b.at(f);e(a,g)}})}function e(b,c){var d;c.observe(function(c){"string"==typeof c||"number"==typeof c?(d=b.append('<option value=":text">:text</option>',{text:c}),a("#"+b.id()).trigger("change")):(d=b.append('<option value=":value">:text</option>',{value:c.hasOwnProperty("value")?c.value:c.text,text:c.text}),a("#"+b.id()).trigger("change"))},function(){"undefined"!=typeof d&&(a("#"+d.id()).remove(),d=void 0),a("#"+b.id()).trigger("change")},null)}return function(a){b.applyDefaults(a,{visible:!0});var e=this.append('<select alia-context class="form-control" :multiple></select>',{multiple:a.multiple?"multiple":""});return e.bindSelectValue(a.selected),e.bindVisible(a.visible),b.isAccessor(a.options)?d(e,a.options):c(e,a.options),e}}()),b.defineControl({name:"datepicker"},function(){return function(c){b.applyDefaults(c,{visible:!0});var d=this.append('<input alia-context type="text" class="form-control">');return a("#"+d.id()).datepicker({startDate:c.startDate,endDate:c.endDate}),"string"==typeof c.placeholder&&d.attr("placeholder",c.placeholder),d.bindDate(c.date),d.bindVisible(c.visible),d}}()),b.defineControl({name:"typeahead"},function(){var d={large:"input-lg",small:"imput-sm"};return function(e){function f(){h.clear();for(var a in k)k.hasOwnProperty(a)&&h.add(k[a])}function g(a){return function(b){k[a]=JSON.parse(JSON.stringify(b)),f()}}var h;"string"===e.type?h=new c({datumTokenizer:function(a){return c.tokenizers.whitespace(a)},queryTokenizer:c.tokenizers.whitespace,limit:10,local:[]}):"object"===e.type&&(h=new c({datumTokenizer:function(a){return c.tokenizers.whitespace(a.display)},queryTokenizer:c.tokenizers.whitespace,limit:10,local:[]})),h.initialize(),b.applyDefaults(e,{disabled:!1,visible:!0});var i=["form-control"];"string"==typeof e.size&&d.hasOwnProperty(e.size)&&i.push(d[e.size]);var j=this.append('<input alia-context type="text" class=":class">',{"class":i.join(" ")});a("#"+j.id()).typeahead({hint:!0,highlight:!0,minLength:1},{name:"typeahead-dataset",displayKey:function(a){return"string"===e.type?a:"object"===e.type?a.display:void 0},source:h.ttAdapter()}),"string"==typeof e.placeholder&&j.attr("placeholder",e.placeholder);var k={};if(b.isAccessor(e.pool))e.pool.onResolve(function(a){k[0]=a,f()});else if(Array.isArray(e.pool))for(var l=0;l<e.pool.length;++l)b.isAccessor(e.pool[l])&&e.pool[l].onResolve(g(l));j.bindDisabled(e.disabled),j.bindText(e.text,"text"),j.bindVisible(e.visible);var m=j.defineProperty("value",e.value);return j.onFocusOut(function(){var b=!1;j.text.set(a("#"+j.id()).typeahead("val"));var c=j.text.get();""===c&&m.set(null);for(var d in k)if(k.hasOwnProperty(d)){for(var f=0;f<k[d].length;++f){if("string"===e.type&&k[d][f]===c){m.set(c),b=!0;break}if("object"===e.type&&k[d][f].display===c){m.set(k[d][f].key),b=!0;break}}if(b)break}b||e.editable?!b&&e.editable&&m.set(c):(j.text.set(""),a("#"+j.id()).typeahead("val",""))}),j}}())}($,alia,Bloodhound),function(a,b){"use strict";b.defineControl({name:"repeat"},function(){return function(a){function c(){d.empty();for(var b=0;f>b;++b){var c=d.append("<div alia-context></div>"),g=e.at(b);a.callback.call(null,c,g)}}var d=this.append("<div alia-context></div>"),e=b.state(a.data),f=null;return e.onResolve(function(a){a.length!==f&&(f=a.length,c())}),d.defineProperty("data",e),c(),d}}())}($,alia),function(a,b){"use strict";b.defineLayout({name:"jumbotron"},function(){return function(a){return this.append("extend"===a.type?'<div class="jumbotron"><div alia-context class="container"></div></div>':'<div alia-context class="jumbotron" id=":id"></div>')}}())}($,alia),function(a,b,c){"use strict";b.defineLayout({name:"unorderedList"},function(){return this.append("<ul alia-context></ul>")}),b.defineLayout({name:"orderedList"},function(){return this.append("<ol alia-context></ol>")}),b.defineLayout({name:"listItem"},function(){return this.append("<li alia-context></li>")}),b.defineLayout({name:"descriptionList"},function(){var a={"default":null,horizontal:"dl-horizontal"};return function(d){return b.applyDefaults(d,{visible:!0,style:"default"},{style:a}),this.append('<dl alia-context class=":class"></dl>',{"class":c.compact([a[d.style]]).join("")})}}()),b.defineLayout({name:"descriptionTerm"},function(){return this.append("<dt alia-context></dt>")}),b.defineLayout({name:"descriptionItem"},function(){return this.append("<dd alia-context></dd>")}),b.defineControl({name:"descriptionList"},function(){function a(a,c,d){return function(){b.doText(a,{text:c[d].term})}}function c(a,c,d){return function(){b.doText(a,{text:c[d].description})}}return function(d){var e=b.layoutDescriptionList(this,d,function(e){for(var f=0;f<d.items.length;++f)b.layoutDescriptionTerm(e,{},a(e,d.items,f)),b.layoutDescriptionItem(e,{},c(e,d.items,f))});return e}}()),b.defineLayout({name:"listGroup"},function(){return function(){return this.append('<ul alia-context class="list-group"></ul>')}}()),b.defineLayout({name:"listGroupItem"},function(){var a={"default":null,success:"list-group-item-success",info:"list-group-item-info",warning:"list-group-item-warning",danger:"list-group-item-danger"};return function(d){b.applyDefaults(d,{visible:!0,style:"default"},{style:a});var e=this.append('<ul alia-context class=":class"></ul>',{"class":c.compact(["list-group-item",a[d.style]]).join("")});return e.bindVisible(d.visible),e}}())}($,alia,_),function(a,b){"use strict";b.defineControl({name:"image"},function(){var a={rounded:"img-rounded",circle:"img-circle",thumbnail:"img-thumbnail"};return function(c){var d=[];"string"==typeof c.style&&a.hasOwnProperty(c.style)&&d.push(a[c.style]),"boolean"==typeof c.responsive&&c.responsive&&d.push("img-responsive");var e=":text";"object"==typeof c.link&&c.link.hasOwnProperty("href")&&(e=b.replace('<a href=":href">:text</a>',{href:c.link}));var f=this.append(b.replace(e,{text:'<img src=":source" alt=":alt" class=":class">'}),{source:c.source,alt:c.alt||"","class":d.join(" ")});return f}}()),b.defineLayout({name:"media"},function(){return function(a){var b=['<div class="media" style="cursor:pointer">','  <a class="pull-left">','    <img class="media-object" src=":source" alt=":alt">',"  </a>",'  <div alia-context class="media-body"></div>',"</div>"],c=this.append(b.join(""),{source:a.source,alt:a.alt||""});return c}}())}($,alia),function(a,b){"use strict";b.defineLayout({name:"modal"},function(){var b={large:"modal-lg",small:"modal-sm"};return function(c){var d="",e=["modal-dialog"];"string"==typeof c.size&&b.hasOwnProperty(c.size)&&e.push(b[c.size]),("undefined"==typeof c.fade||c.fade===!0)&&(d="fade");var f='<div alia-context class="modal :fade" tabindex="-1" role="dialog" aria-labelledby=":title" aria-hidden="true">  <div class=":class">    <div alia-context="content" class="modal-content"></div>  </div></div>',g=this.append(f,{title:c.title,"class":e.join(" "),fade:d});return a("#"+g.id()).modal({backdrop:"static",show:!1}),g.hide=function(){a("#"+g.id()).modal("hide")},g.show=function(){a("#"+g.id()).modal("show")},a("#"+g.id()).on("shown.bs.modal",function(){a("#"+g.id()+' form:first *:input[type!=hidden][disabled!="disabled"][class!="form-control tt-hint"]:first').focus()}),g}}()),b.defineLayout({name:"modalHeader"},function(){return this.append("content",'<div alia-context class="modal-header"></div>')}),b.defineLayout({name:"modalBody"},function(){return this.append("content",'<div alia-context class="modal-body"></div>')}),b.defineLayout({name:"modalFooter"},function(){return this.append("content",'<div alia-context class="modal-footer"></div>')}),b.defineControl({name:"modalForm"},function(){function a(a){var b="emit"+a.charAt(0).toUpperCase()+a.slice(1);return b}function c(b,c,d,e,f){return function(){d.set(!0);var g=b.getData(),h=function(){d.set(!1),e.set(null),f.hide(),b.refresh()},i=function(a){d.set(!1),e.set(a)};f[a(c)](g,h,i)}}var d={text:{type:"string","default":"",inputType:"textbox"},number:{type:"number","default":0,inputType:"textbox"},"boolean":{type:"boolean","default":!0,inputType:"checkbox"},typeahead:{"default":"",inputType:"typeahead"},datepicker:{"default":"",inputType:"datepicker"}};return function(a){var e,f={},g=[];for(e=0;e<a.fields.length;++e){var h=a.fields[e];if("string"!=typeof h.name)throw new Error("Invalid form field name");var i,j;"string"==typeof h.type&&d.hasOwnProperty(h.type)?(i=h.type,j=d[h.type]):(i="text",j=d.text),b.isAccessor(a.formdata)||(f[h.name]=typeof h.initValue===j.type?h.initValue:j.default);var k={type:j.inputType,label:h.label,lens:"."+h.name,datatype:i,placeholder:h.placeholder||"",disabled:h.disabled||!1};"typeahead"===k.type&&(k.sourcetype=h.sourcetype,k.source=h.source,k.editable=h.editable),g.push(k)}b.isAccessor(a.formData)&&(f=a.formData);var l=b.state(!1),m=b.state(null),n=b.layoutModal(this,{size:a.size,title:a.title,fade:a.fade},function(d){var e=d;b.layoutModalHeader(d,{},function(c){b.doButton(c,{close:!0,text:"&times;"}).onClick(function(){l.set(!1),m.set(null),n.hide()}),b.doHeading(c,{type:4,text:a.title})});var h;b.layoutModalBody(d,{},function(a){h=b.doForm(a,{label:{large:3,small:4},control:{large:9,small:8},model:f,fields:g})}),b.layoutModalFooter(d,{},function(d){if(Array.isArray(a.buttons))for(var f=a.buttons,g=0;g<f.length;++g)b.doButton(d,{text:f[g].text,eventName:f.eventName,disabled:l}).onClick(c(h,f[g].eventName,l,m,n));b.doText(d,{text:m,style:"danger",visible:m.then(b.isNotEmptyString)}),b.doText(d,{text:"&nbsp;&nbsp;&nbsp;"}),b.doButton(d,{text:"Cancel",disabled:l}).onClick(function(){h.refresh(),m.set(null),n.hide()});var i=b.doButton(d,{text:"Save",style:"primary",loading:l,loadingStyle:"expand-right"}).onClick(function(){l.set(!0);var a=h.getData(),b=function(){l.set(!1),m.set(null),n.hide(),h.refresh()},c=function(a){l.set(!1),m.set(a)};n.emitSubmit(a,b,c)});a.onEnterKeySubmit&&e.onEnterKey(function(){i.doClick()})})});if(n.defineEvent("Submit"),Array.isArray(a.buttons)){var o=a.buttons;for(e=0;e<o.length;++e)n.defineEvent(o[e].eventName)}return n}}())}($,alia),function(a,b){"use strict";b.defineLayout({name:"multiviewNavigationLinkset"},function(){return function(){var a=this.append('<ul alia-context class="mulitview-navigation-linkset"></ul>'),b=this;return a.push=function(){return b.push.apply(b,arguments),this},a}}()),b.defineControl({name:"multiviewNavigationHeader"},function(){return function(a){var b=this.append('<li role="presentation" class="multiview-navigation-header">:text</li>',{text:a.text});return b.bindHtml(b.defineProperty("text",a.text)),b}}()),b.defineControl({name:"multiviewNavigationItem"},function(){return function(a){b.applyDefaults(a,{visible:!0});var c;return a.hasOwnProperty("view")?(c=this.append('<li><a alia-context style="cursor: pointer;">:text</a></li>',{link:a.link,text:a.text}).onClick(function(){this.push(a.view,a.query)}.bind(this)),c.bindHtml("text",a.text)):a.hasOwnProperty("link")&&(c=this.append('<li><a alia-context href=":link">:text</a></li>',{link:a.link,text:a.text}),c.bindHtml("text",a.text)),c.bindVisible(a.visible),c}}()),b.defineControl({name:"multiviewNavigationDivider"},function(){return function(){return this.append('<li alia-context class="divider"></li>')}}())}($,alia),function(a,b){"use strict";b.defineLayout({name:"navbar"},function(){var a={"default":"navbar-default",inverse:"navbar-inverse"},b={top:"navbar-fixed-top",bottom:"navbar-fixed-bottom"};return function(c){var d=["navbar"];d.push("string"==typeof c.style&&a.hasOwnProperty(c.style)?a[c.style]:a.default),"string"==typeof c.fixed&&b.hasOwnProperty(c.fixed)&&d.push(b[c.fixed]);var e,f='<nav class=":class" role="navigation">  <div alia-context class="container-fluid"></div></nav>',g=this.append(f,{"class":d.join(" ")});e="string"==typeof c.brand?c.brand:"Brand";var h=g.append('<div class="navbar-header">  <button alia-context="collapse" type="button" class="navbar-toggle" data-toggle="collapse">    <span class="sr-only">Toggle navigation</span>    <span class="icon-bar"></span>    <span class="icon-bar"></span>    <span class="icon-bar"></span>  </button>  <a class="navbar-brand" href="#">:brand</a></div>',{brand:e}),i=g.append('<div alia-context class="collapse navbar-collapse">  <ul alia-context="nav" class="nav navbar-nav"></ul></div>');return h.kattr("collapse","data-target","#"+i.id()),i}}()),b.defineLayout({name:"navbarForm"},function(){return function(){return this.append('<form alia-context class="navbar-form navbar-left"></form>')}}()),b.defineLayout({name:"navbarRight"},function(){return function(){return this.append('<ul alia-context="nav" class="nav navbar-nav navbar-right"></ul>')
}}()),b.defineControl({name:"navbarLink"},function(){return function(c){b.applyDefaults(c,{visible:!0});var d=this.append("nav",'<li alia-context="navLink" class="navLink"><a alia-context href=":link"></a></li>',{link:c.link});d.bindVisible("navLink",c.visible);var e=a("#"+d.id()),f=d.defineProperty("text",c.text);return f.onResolve(function(a){e.html(a)}),f.onError(function(){e.empty()}),d}}()),b.defineLayout({name:"navbarDropdown"},function(){return function(a){b.applyDefaults(a,{visible:!0});var c='<li alia-context="dropdown" class="dropdown">  <a alia-context="link" class="dropdown-toggle" style="cursor:pointer;" data-toggle="dropdown">:text <b class="caret"></b></a>  <ul alia-context class="dropdown-menu"></ul></li>',d=this.append("nav",c,{link:a.link});d.bindVisible("dropdown",a.visible);var e=d.defineProperty("text",a.text);return e.onResolve(function(a){d.khtml("link",a+' <b class="caret"></b>')}),e.onError(function(){d.khtml("link","")}),d}}())}($,alia),function(a,b){"use strict";b.defineLayout({name:"panel"},function(){var c={"default":"panel-default",primary:"panel-primary",success:"panel-success",info:"panel-info",warning:"panel-warning",danger:"panel-danger"},d={"default":null,h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6"};return function(e){b.applyDefaults(e,{style:"default",headerStyle:"default",visible:!0,collapsible:!1,collapsed:!1},{style:c,headerStyle:d});var f='<div alia-context="div" class="panel :style">';e.header&&(f+=e.headerStyle?'<div class="panel-heading"><:hs alia-context="header" class="panel-title"></:hs></div>':'<div alia-context="header" class="panel-heading"></div>'),f+='<div alia-context class="panel-body"></div>',e.footer&&(f+='<div alia-context="footer" class="panel-footer"></div>'),f+="</div>";var g=this.append(f,{style:c[e.style],hs:d[e.headerStyle]});g.bindVisible("div",e.visible),e.collapsible&&(g.bindCollapse("",e.collapsed),a("#"+g.id("header")).css("cursor","pointer"),e.headerStyle?a("#"+g.id("header")).parent().click(function(){g.collapsed.set(),g.collapsed.set(!g.collapsed.get())}):a("#"+g.id("header")).click(function(){g.collapsed.set(!g.collapsed.get())}));var h,i;return e.header&&(h=g.defineProperty("header",e.header),h.onResolve(function(b){a("#"+g.id("header")).html(b)})),e.footer&&(i=g.defineProperty("footer",e.footer),i.onResolve(function(b){a("#"+g.id("footer")).html(b)})),g}}())}($,alia),function(a,b){"use strict";b.defineControl({name:"progress"},function(){var a={success:"progress-bar-success",info:"progress-bar-info",warning:"progress-bar-warning",danger:"progress-bar-danger"};return function(b){var c=["progress-bar"],d="";"boolean"==typeof b.rating&&b.rating===!0&&(d="progress-rating"),"string"==typeof b.style&&a.hasOwnProperty(b.style)&&c.push(a[b.style]);var e=['<div class="progress :rating">','  <div class=":class :rating" role="progressbar" aria-valuenow=":now" aria-valuemin="0" aria-valuemax="100" style="width::now%">:now%</div>',"</div>"],f=this.append(e.join(""),{now:b.now,rating:d,"class":c.join(" ")});return f}}())}($,alia),function(a,b){"use strict";b.defineControl({name:"pageSpinner"},function(){var c={lines:13,length:20,width:10,radius:30,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"table-spinner"};return function(){var d=b.viewport.append('<div alia-context class="page-spinner-background"></div>'),e=a("#"+d.id())[0],f=new Spinner(c);return f.spin(e),a("#"+d.id()).attr("style",""),d.stop=function(){f.stop(),a("#"+d.id()).hide()},d.stopAndRemove=function(){f.stop(),a("#"+d.id()).remove()},d.start=function(){f.spin(e),a("#"+d.id()).show()},d}}())}($,alia),function(a,b){"use strict";b.defineLayout({name:"table"},function(){var a={bordered:"table-bordered",striped:"table-striped",hover:"table-hover",condensed:"table-condensed"};return function(b){var c,d=[];if("string"==typeof b.style?c=b.style.split(","):Array.isArray(b.style)&&(c=b.style),c)for(var e=0;e<c.length;e++)a.hasOwnProperty(c[e])&&d.push(a[c[e]]);return this.append('<table alia-context class="table :class"></table>',{"class":d.join(" ")})}}()),b.defineLayout({name:"tableRow"},function(){var a={active:"active",success:"success",warning:"warning",danger:"danger",info:"info"};return function(b){var c;return c=this.append("heading"===b.type?"<thead><tr alia-context></tr></thead>":"<tr alia-context></tr>"),c.defineProperty("style",b.style),"boolean"==typeof b.selectable&&b.selectable&&c.css("cursor","pointer"),c.style.onResolve(function(b){"string"==typeof b&&a.hasOwnProperty(b)?c.attr("class",a[b]):c.removeAttr("class")}),c}}()),b.defineLayout({name:"tableCell"},function(){return function(a){var c="heading"===a.type?"h":"d",d=this.append("<t:type alia-context></t:type>",{type:c});return a.hasOwnProperty("sortable")&&a.sortable===!0&&(d.css("cursor","pointer"),d.defineProperty("sortOrder",""),d.onClick(function(){d.sortOrder.set(""===d.sortOrder.get()?"A":"A"===d.sortOrder.get()?"D":"")}),b.doText(d,{style:"info",text:d.sortOrder}).class("add","pull-right")),d}}()),b.defineControl({name:"table"},function(){function c(a){var b,c=["table"];if("string"==typeof a.style?b=a.style.split(","):Array.isArray(a.style)&&(b=a.style),b)for(var d=0;d<b.length;d++)y.hasOwnProperty(b[d])&&c.push(y[b[d]]);return c}function d(a,c){return function(d){b.doText(d,{text:a[c].heading})}}function e(a,c){var e=[];return b.layoutTableRow(a,{},function(a){for(var f=0;f<c.fields.length;++f)c.fields[f].hidden||e.push(b.layoutTableCell(a,{type:"heading",sortable:c.sortable},d(c.fields,f)).sortOrder);c.removable===!0&&b.layoutTableCell(a,{type:"heading"},function(a){var d=b.doButton(a,{style:"link"}).onClick(function(){c.data.set([])});d.css("padding","0"),b.doText(d,{text:" Delete All "}),b.doIcon(d,{name:"remove"})})}),b.all(e)}function f(a,b){return function(){for(var c=a.get(),d=c.splice(b,1)[0],e=0;e<c.length;++e)c[e]>d&&c[e]--;a.set(c)}}function g(b,c,d,e){a("#"+c.id()).empty();var g=0;d.data.property(".length").onResolve(function(a){if(g>a)g=a;else for(var i=g;a>i;++i)h(b,c,d,i,f(e,i)),g++})}function h(c,d,e,f,g){b.layoutTableRow(d,{selectable:e.selectable,style:c.currentRow.then(function(a){return a===f?"info":""})},function(d){e.data.at(f).onUnresolve(function(){a("#"+d.id()).remove(),g()}),e.clickable===!0&&d.css("cursor","pointer"),d.onClick(function(){c.emitRowClick(e.data.get()[f])}),e.selectable===!0&&d.onClick(function(){c.currentRow.set(f),c.currentItem.set(e.data.get()[f])});for(var h=0;h<e.fields.length;++h)i(d,e,f,h);e.removable===!0&&b.layoutTableCell(d,{},function(a){var c=b.doButton(a,{style:"link"}).onClick(function(){var a=e.data.get();a.splice(f,1),e.data.set(a)});c.css("padding","0"),b.doIcon(c,{name:"remove"})})})}function i(c,d,e,f){b.layoutTableCell(c,{},function(b){j(b,d,e,f),d.fields[f].hidden===!0&&a("#"+b.id()).hide()})}function j(a,c,d,e){var f,g=c.data,h=c.fields[e];if(f="function"==typeof h.map?g.property("."+d+h.property).then(h.map):g.property("."+d+h.property),"string"==typeof h.editableType)switch(a.css("padding","0"),h.editableType){case"number":case"text":b.doEditableTextbox(a,{type:h.editableType,text:f,deferred:!1})}else b.doText(a,{text:f})}function k(a,b){if("."===b.substr(0,1)&&(b=b.substring(1,b.length)),"string"==typeof b){var c=b.split("."),d=a[c.shift()];return 0===c.length?d:k(d,c.join("."))}return"number"==typeof b?a[b]:void 0}function l(a,b){return a==b?0:b>a?-1:1}function m(a,b){var c=l,d=l;return a&&(d=function(b,d){return c(a(b),a(d))}),""===b?function(){return 0}:"D"===b?function(a,b){return-1*d(a,b)}:d}function n(a,b){for(var c=b.fields,d=[],e=0,f=0;f<c.length;++f)c[f].hidden||(d.push({property:c[f].property,cmp:m(c[f].sortPrimer,a[e])}),e++);return d}function o(a,c,d,e,f){b.join(a,c.data,function(a,b){return[a,b]}).onResolve(function(a){var b=e.get();if(b.length<a[1].length){for(var g=b.length;g<a[1].length;++g)b[g]=g;e.set(b)}var h=n(a[0],c);e.set(p(a[1],h,d,e.get())),f()})}function p(a,b,c,d){null!==d&&r(d,c);for(var e=[],f=0;f<a.length;++f)e.push(f);return q(a,e,b),e}function q(a,b,c){var d=JSON.parse(JSON.stringify(b));b.sort(function(e,f){for(var g=0;g<c.length;++g){var h=k(a[b[e]],c[g].property),i=k(a[b[f]],c[g].property),j=c[g].cmp(h,i);if(0!==j)return j}return d[e]-d[f]})}function r(b,c){var d,e=[];for(d=0;d<b.length;++d)e[b[d]]=a("#"+c.id()+" tr:nth-child("+(d+1)+")");for(d=0;d<e.length;++d)a("#"+c.id()).append(e[d])}function s(b,c){var d=[];return c&&a("#"+b.id()+" tr").each(function(b,e){a(e).show();var f=!1;a(e).children("td").each(function(b,d){var e=a(d).text();return e.toLowerCase().indexOf(c.toLowerCase())>-1?(f=!0,!1):void 0}),f||(a(e).hide(),d.push(b))}),d}function t(b,c,d){return function(e,f){if(b.indexOf(e)<0){var g=a(f).children("td:nth-child("+(d+1)+")"),h=g.text();h.toLowerCase().indexOf(c[d].toLowerCase())<0&&(a(f).hide(),b.push(e))}}}function u(b,c,d){for(var e=0;e<d.length;++e)"string"==typeof d[e]&&a("#"+b.id()+" tr").each(t(c,d,e));c.sort(function(a,b){return a-b})}function v(a,c,d,e,f,g){return function(h){b.doLink(h,{text:a+1+""}).onClick(function(a){return function(){x(c,d,e,f,a,g)}}(a))}}function w(c,d,e,f,g){var h=f-g.length,i=Math.ceil(h/e);a("#"+c.id()).empty();for(var j=0;i>j;++j)b.layoutListItem(c,{},v(j,c,d,g,f,e));x(c,d,g,f,0,e)}function x(b,c,d,e,f,g){a("#"+b.id()+".pagination li").removeClass("active"),a("#"+b.id()+".pagination li:nth-child("+(f+1)+")").addClass("active");for(var h=0,i=d[h],j=0,k=0;e>k;++k)k!==i?(f*g>j||j>=(f+1)*g?a("#"+c.id()+" tr:nth-child("+(k+1)+")").css("display","none"):a("#"+c.id()+" tr:nth-child("+(k+1)+")").css("display","table-row"),j++):i=d[++h]}var y={bordered:"table-bordered",striped:"table-striped",hover:"table-hover",condensed:"table-condensed"},z={lines:9,length:5,width:1.5,radius:2.7,corners:.8,rotate:0,direction:1,color:"#000",speed:2.2,trail:45,shadow:!1,hwaccel:!1,className:"table-spinner"};return function(d){b.applyDefaults(d,{sortable:!1,selectable:!1,removable:!1,spinner:!1,clickable:!1,visible:!0});var f,h,i,j=c(d),k=this.append('<table alia-context class=":class"></table>',{"class":j.join(" ")});k.defineProperty("currentItem",null),k.defineProperty("currentRow",null);var l=d.fields.length;d.removable===!0&&l++;var m=k.append("<thead alia-context></thead>"),n=k.append("<tbody alia-context></tbody>"),p=k.append('<tfoot><tr><td alia-context colspan=":span" class="footer-cell"></td></tr></tfoot>',{span:l});if("object"==typeof d.paging&&"number"==typeof d.paging.default&&Array.isArray(d.paging.options)&&(b.layoutUnorderedList(p,{},function(a){i=a,a.class("add","pagination")}),h=b.doSelect(p,{selected:d.paging.default,options:d.paging.options}).class("add","pull-right").selected,b.doText(p,{weight:"bold",text:"Page Size: "}).class("add","pull-right").css("margin-right","5px").css("position","relative").css("top","7px")),d.spinner===!0){var q=a("#"+p.id(""))[0],r=new Spinner(z);r.spin(q),d.data.observe(function(){r.stop()},function(){r.spin(q)},null)}var t=e(m,d),v=[];if("undefined"!=typeof d.data.get())for(f=0;f<d.data.get().length;++f)v.push(f);var x=b.state(v);g(k,n,d,x);var y=[];for(f=0;f<d.fields.length;++f)y.push(b.isAccessor(d.fields[f].filter)?d.fields[f].filter:null);var A=b.all(y);return o(t,d,n,x,function(){"object"==typeof d.paging&&"number"==typeof d.paging.default&&Array.isArray(d.paging.options)&&b.all([h,d.data,d.filter,A]).onResolve(function(a){var b=[],c=a[0];"string"==typeof a[2]&&(b=s(n,a[2])),Array.isArray(a[3])&&u(n,b,a[3]),"number"!=typeof a[0]&&(c=parseInt(a[0])),w(i,n,c,a[1].length,b)})}),k.bindVisible(d.visible),k.defineEvent("RowClick"),k}}()),b.defineControl({name:"propertyTable"},function(){function a(a,c,d){var e;return e="function"==typeof c.map?b.doText(a,{text:d.property("."+c.name).then(c.map)}):b.doText(a,{text:d.property("."+c.name)}),e.class("add","normal"),e.width()+13}function c(a,c,d,e){var f;switch(c.editableType){case"number":case"text":f=b.doEditableTextbox(a,{type:c.editableType,text:d.property("."+c.name),deferred:e}).onSubmit(c.onSubmit);break;case"boolean":f=b.doEditableBoolean(a,{type:"y/n",value:d.property("."+c.name),map:c.map,deferred:e}).onSubmit(c.onSubmit);break;default:throw new Error("Cannot render editable type "+c.editableType)}return f.width()}function d(d,e,f,g){return function(h){h.class("add","item"),g%2==1&&h.class("add","item-right"),b.layoutDiv(h,{classes:"wrap"},function(g){b.doText(g,{text:e.label+":"}).class("add","name").class("add","text-muted"),f="string"==typeof e.editableType&&"function"==typeof e.onSubmit?Math.max(c(g,e,d.data,d.deferred),f):Math.max(a(g,e,d.data,d.deferred),f)})}}function e(a,c){b.layoutDiv(a,{classes:"property-list"},function(a){var e=0;c.newLine?a.class("add","skinny"):a.onResize(function(b){2*(e+150)>b?a.class("add","skinny"):a.class("remove","skinny")}),c.data.onResolve(function(){a.empty(),b.layoutUnorderedList(a,{},function(a){for(var f=0;f<c.fields.length;++f){var g=c.fields[f];b.layoutListItem(a,{},d(c,g,e,f))}})})})}return function(a){b.applyDefaults(a,{deferred:!0});var c=this.append("<div alia-context></div>");e(c,a)}}())}($,alia),function(a,b){"use strict";b.defineLayout({name:"tabset"},function(){var a={horizontal:"horizontal",vertical:"vertical"};return function(c){b.applyDefaults(c,{visible:!0});var d=a[c.style]||a.horizontal,e="";e="horizontal"===d?'<div class="container-fluid" alia-context>  <div class="row">    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">      <ul alia-context="nav" class="nav nav-tabs"></ul>      <div alia-context="content" class="tab-content"></div>    </div>  </div></div>':'<div class="container-fluid" alia-context>  <div class="row">    <div class="col-lg-3 col-md-3 col-sm-4 col-xs-5">      <ul alia-context="nav" class="nav nav-pills nav-stacked"></ul>    </div>    <div class="col-lg-9 col-md-9 col-sm-8 col-xs-7">      <div alia-context="content" class="tab-content"></div>    </div>  </div></div>';var f=this.append(e);return f.bindVisible(c.visible),f}}()),b.defineLayout({name:"tab"},function(){return function(a){var c=[];"boolean"==typeof a.active&&a.active&&c.push("active");var d=this.append("content",'<div alia-context class="tab-pane :class"></div>',{"class":c.join(" ")});return this.append("nav",'<li alia-context class=":class"><a data-target=":target" data-toggle="tab" style="cursor:pointer;">:title</a></li>',{"class":c.join(" "),target:"#"+d.ids[""],title:b.getString(a.title)}),d}}())}($,alia),function(a,b,c,d,e,f){"use strict";b.defineLayout({name:"heading"},function(){var a={1:"h1",2:"h2",3:"h3",4:"h4",5:"h5",6:"h6"};return function(c){b.applyDefaults(c,{type:"h1",visible:!0});var d=this.append("<:type alia-context></:type>",{type:a[c.type]});return d.bindHtml("text",c.text),d.bindVisible(c.visible),d}}()),b.defineControl({name:"heading"},function(){var a={1:"h1",2:"h2",3:"h3",4:"h4",5:"h5",6:"h6"};return function(c){b.applyDefaults(c,{type:"h1",visible:!0});var d=this.append("<:type alia-context></:type>",{type:a[c.type]});return d.bindHtml("text",c.text),d.bindVisible(c.visible),d}}()),b.defineControl({name:"link"},function(){return function(a){b.applyDefaults(a,{visible:!0});var c=this.append('<a alia-context style="cursor: pointer"></a>');return"string"==typeof a.name&&c.attr("name",a.name),c.bindHtml("text",a.text),c.bindVisible(a.visible),c}}()),b.defineControl({name:"text"},function(){var a={italics:"<em>:text</em>",bold:"<strong>:text</strong>"},c={small:"<small>:text</small>"},d={muted:"text-muted",primary:"text-primary",success:"text-success",info:"text-info",warning:"text-warning",danger:"text-danger"};return function(e){function f(b){h.empty(),void 0!==b&&("function"==typeof e.filter&&(b=e.filter(b)),"string"==typeof e.weight&&a.hasOwnProperty(e.weight)&&(b=a[e.weight].replace(":text",b)),"string"==typeof e.size&&c.hasOwnProperty(e.size)&&(b=c[e.size].replace(":text",b)),h.html(b))}b.applyDefaults(e,{visible:!0});var g=[];"string"==typeof e.style&&d.hasOwnProperty(e.style)&&g.push(d[e.style]);var h=this.append('<span alia-context class=":class"></span>',{"class":g.join(" ")});return b.isAccessor(e.text)?e.text.observe(function(a){f(a)},function(){f()}):f(e.text),h.bindVisible(e.visible),h}}()),b.defineControl({name:"break"},function(){return this.append("<br />")}),b.defineControl({name:"paragraph"},function(){var a={lead:"lead"},c={left:"text-left",center:"text-center",right:"text-right",justify:"text-justify"};return function(d){b.applyDefaults(d,{visible:!0});var e=[];"string"==typeof d.style&&a.hasOwnProperty(d.style)&&e.push(a[d.style]),"string"==typeof d.alignment&&c.hasOwnProperty(d.alignment)&&e.push(c[d.alignment]);var f=this.append('<p alia-context class=":class">:text</p>',{"class":e.join(" "),text:b.getString(d.text)});return f.bindHtml("text",d.text),f.bindVisible(d.visible),f}}()),b.defineControl({name:"blockquote"},function(){var a={"default":null,reverse:"blockquote-reverse"};return function(c){b.applyDefaults(c,{visible:!0,style:"default"},{style:a});var e='<blockquote alia-context class=":class">  <p alia-context="quote"></p></blockquote>',f=this.append(e,{"class":d.compact([a[c.style]]).join("")});if(c.footer){var g=f.append("<footer alia-context></footer>"),h=g.bindHtml("footer",c.footer);f.defineProperty("footer",h)}return f.bindHtml("quote","text",c.text),f}}()),b.defineControl({name:"markdown"},function(){return function(d){b.applyDefaults(d,{visible:!0});var g=e.getSanitizingConverter();e.Extra.init(g,{highlighter:"highlight",table_class:"table table-striped"});var h=this.append("<div alia-context></div>"),i=a("#"+h.id()),j=h.defineProperty("text",d.text);return j.onResolve(function(b){i.empty();var d=g.makeHtml(b);i.append(d),a("code").each(function(a,b){c.highlightBlock(b)}),f.Hub.Queue(["Typeset",f.Hub,h.id()])}),h.bindVisible(d.visible),h}}()),b.defineControl({name:"horizontalRule"},function(){return this.append("<hr />")})}($,alia,hljs,_,Markdown,MathJax),function(a,b){"use strict";b.defineControl({name:"widget"},function(){function a(a,b,c){return function(d){a(b,d),c()}}var c={inlineBlock:"inline-block"},d={right:"pull-right",left:"pull-left"};return function(e){function f(){var a;for(a=0;a<h.length;++a)if("undefined"==typeof h[a])return;g.empty();var b=[g];for(a=0;a<h.length;++a)b.push(h[a]);e.fcn.apply(null,b)}b.applyDefaults(e,{visible:!0});var g=this.append("<div alia-context></div>");"string"==typeof e.display&&c.hasOwnProperty(e.display)&&g.css("display",c[e.display]),"number"==typeof e.margin&&g.css("margin",e.margin+"px"),"string"==typeof e.float&&d.hasOwnProperty(e.float)&&g.class("add",d[e.float]);for(var h=[],i=function(a,b){h[a]=b},j=0;j<e.args.length;++j)b.isAccessor(e.args[j])?(h.push(void 0),e.args[j].onResolve(a(i,j,f))):h.push(e.args[j]);return f(),g.bindVisible(e.visible),g}}())}($,alia),function(a,b){"use strict";a.defineProvider({name:"$"},function(){return b})}(alia,$),function(a,b){"use strict";a.defineProvider({name:"$window"},function(){return b})}(alia,window),function(a){"use strict";a.defineProvider({name:"$location",dependencies:["$"]},function(b){function c(){return y.absUrl}function d(){var b=g();if(y.absUrl!==b){var c={redirect:null};c=a.broadcast("locationChangeStarted",[y.absUrl,b]),c.isDefaultPrevented()?k(b):(g(y.absUrl),a.broadcast("locationChanged",y.absUrl))}}function e(){var a=z.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""}function f(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function g(a,b){return location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),"string"!=typeof a?B||location.href.replace(/%27/g,"'"):void(A!==a&&(A=a,b?history.replaceState(null,"",a):history.pushState(null,"",a)))}function h(){var b=a.url.toQueryString(y.search),c=y.hash?"#"+a.url.encodeUriSegment(y.hash):"";y.url=a.url.encodePath(y.path)+(b?"?"+b:"")+c,y.absUrl=E+y.url.substr(1)}function i(a){return"string"!=typeof a?y.hash:void h()}function j(){return y.host}function k(a){var b=f(E,a);if("string"!=typeof b)throw new Error("Invalid path url during location.parse");m(b),y.path||(y.path="/"),h()}function l(b){var c=a.url.resolve(b,D);y.protocol=c.protocol,y.host=c.hostname,y.port=parseInt(c.port,10)||x[c.protocol]||null}function m(b){var c="/"!==b.charAt(0);c&&(b="/"+b);var d=a.url.resolve(b,D),e=d.pathname,f=c&&"/"===e.charAt(0)?e.substring(1):e;y.path=decodeURIComponent(f),y.search=a.url.parseQuery(d.search),y.hash=decodeURIComponent(d.hash),y.path&&"/"!=y.path.charAt(0)&&(y.path="/"+y.path)}function n(a){return"string"!=typeof a?y.path:(y.path="/"==a.charAt(0)?a:"/"+a,h(),d(),void 0)}function o(){return y.protocol}function p(){return y.port}function q(a){var b,c;return void 0!==(b=f(D,a))?(c=b,void 0!==(b=f(F,b))?E+(f("/",b)||b):D+c):void 0!==(b=f(E,a))?E+b:E==a+"/"?E:void 0}function r(b,c){switch(arguments.length){case 0:return y.search;case 1:if(a.isString(b))y.search=a.url.parseQuery(b);else{if(!a.isObject(b))throw new Error("The first argument of the `$location#search()` call must be a string or an object.");y.search=b}break;default:a.isUndefined(c)||null===c?delete y.search[b]:y.search[b]=c}h(),d()}function s(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function t(a){return a.substr(0,u(a).lastIndexOf("/")+1)}function u(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function v(b,c){if(a.isUndefined(b))return y.url;var e=w.exec(b);e[1]&&n(decodeURIComponent(e[1])),(e[2]||e[1])&&r(e[3]||""),i(e[5]||"",c),d()}var w=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,x={http:80,https:443,ftp:21},y={absUrl:null,protocol:null,host:null,port:null,url:null},z=b("base"),A=location.href,B=null,C=g(),D=s(C)+(e()||"/"),E=t(D),F=F||"",G=b("body");return G.on("click",function(a){if(!a.ctrlKey&&!a.metaKey&&2!=a.which){for(var c=b(a.target);"a"!==c[0].nodeName.toLowerCase();)if(c[0]===G[0]||!(c=c.parent())[0])return;var e=c.prop("href"),f=q(e);e&&!c.attr("target")&&f&&!a.isDefaultPrevented()&&f!==g()&&(a.preventDefault(),k(f),d())}}),b(window).on("popstate",function(){console.log("popstate");var b=g();if(A!==b&&(A=b,y.absUrl!==b)){var c=y.absUrl;k(b),a.broadcast("locationChanged",[y.absUrl,c])}}),l(D),k(q(C)),d(),{absUrl:c,baseHref:e,hash:i,host:j,path:n,protocol:o,port:p,search:r,url:v}})}(alia),function(a){"use strict";a.defineProvider({name:"$route",dependencies:["$","$location"]},function(b,c){function d(){if(i.hasOwnProperty(j.path)){var b=i[j.path];b.workspace?(j.context=a.stageWorkspaceContext(),j.type="workspace"):b.multiview?(j.context=a.stageMultiviewContext(),j.type="multiview"):(j.context=a.stageViewContext(),j.type="view"),a.resolve(b.dependencies,[j.context],{$params:j.params,$query:j.query}).onResolve(function(a){var c,d,e;b.ctor.apply(null,a),"workspace"===j.type&&"string"==typeof j.query.task?(d=j.context,c=d.signature(j.query.task,j.query),d.currentSignature()!==c&&d.push(j.query.task,j.query)):"multiview"===j.type&&"string"==typeof j.query.view&&(e=j.context,c=e.signature(j.query.view,j.query),e.currentSignature()!==c&&e.push(j.query.view,j.query))})}}function e(a,b){if(!b.regex)return null;var c=b.regex.re.exec(a);if(!c)return null;for(var d=b.regex.keys,e={},f=1,g=c.length;g>f;++f){var h=d[f-1],i="string"==typeof c[f]?decodeURIComponent(c[f]):c[f];h&&i&&(e[h.name]=i)}return e}function f(){var a,b;for(var d in i)if(i.hasOwnProperty(d)&&(a=e(c.path(),i[d]))){b={path:d,params:a,query:c.search()};break}return b}function g(a,b){b=b||{};var c=b.caseInsensitiveMatch,d={originalPath:a,re:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){var f="?"===d?d:null,g="*"===d?d:null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.re=new RegExp("^"+a+"$",c?"i":""),d}function h(){var a,b,c,e=f();j&&j.path===e.path?"workspace"===j.type&&"string"==typeof e.query.task?(b=j.context,c=b.signature(e.query.task,e.query),b.currentSignature()!==c&&b.push(e.query.task,e.query)):"multiview"===j.type&&"string"==typeof e.query.view&&(a=j.context,c=a.signature(e.query.view,e.query),a.currentSignature()!==c&&a.push(e.query.view,e.query)):(j=e,d())}var i={},j=null;a.on("locationChanged",h);var k={};return k.when=function(a,b){i[a.path]={path:a.path,dependencies:a.dependencies,regex:g(a.path),workspace:a.workspace===!0,multiview:a.multiview===!0,ctor:b};var d=e(c.path(),i[a.path]);return d&&h(null,a.path),this},k.otherwise=function(){return this},k})}(alia),function(a){"use strict";a.defineProvider({name:"$request",dependencies:["$"]},function(b){function c(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(a=a.replace(":"+e,b[e]));var f=[];if(Array.isArray(c))for(d=0;d<c.length;++d)c[d].hasOwnProperty("key")&&c[d].hasOwnProperty("value")&&f.push(c[d].key+"="+c[d].value);else for(e in c)c.hasOwnProperty(e)&&f.push(e+"="+c[e].toString());return f.length>0&&(a+="?"+f.join("&")),a}var d=function(d){var e={url:c(d.url,d.params,d.query),type:d.method?d.method:"GET"};d.json&&(e.data=JSON.stringify(d.json),e.contentType="application/json",e.processData=!1),b.extend(!0,d,e);var f=b.ajax(d);return a.deferred(function(b,c){f.then(function(a,c,d){b({body:a,status:c,statusCode:d.status,xhr:d})},function(b,d,e){var f={error:e,status:d,statusCode:b.status,xhr:b},g=a.broadcast("requestError",[f]);g.defaultPrevented,c(a.error(f))})})};return d.get=function(a,b,c){return d({url:a,method:"GET",params:b,query:c,xhrFields:{withCredentials:!0}})},d.post=function(a,b,c,e){switch(arguments.length){case 2:e=b,b=null;break;case 3:e=c,c=null;break;case 4:}return d({url:a,method:"POST",params:b,query:c,json:e,xhrFields:{withCredentials:!0}})},d.put=function(a,b,c,e){switch(arguments.length){case 2:e=b,b=null;break;case 3:e=c,c=null;break;case 4:}return d({url:a,method:"PUT",params:b,query:c,json:e})},d})}(alia);